{"version":3,"file":"timeline.esm.js","sources":["../src/consts.ts","../src/utils.ts","../src/Timeline.ts"],"sourcesContent":["export const PREFIX = `scenejs_timeline_`;\nexport const CSS = `\n.timeline {\n  position: relative;\n  font-size: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.header_area, .scroll_area {\n   width: 100%;\n   position: relative;\n  display: flex;\n  -webkit-align-items: flex-start;\n  align-items: flex-start;\n}\n.header_area {\n  position: relative;\n  z-index: 10;\n  top: 0;\n  height: 30px;\n  min-height: 30px;\n}\n.header_area .keyframes {\n  padding: 0px;\n}\n.header_area .properties_area,\n.header_area .keyframes_area,\n.header_area .values_area,\n.header_area .keyframes_scroll_area {\n    height: 100%;\n}\n.header_area .property, .header_area .value, .header_area .keyframes {\n  height: 100%;\n}\n.header_area .keyframes_area::-webkit-scrollbar {\n    display: none; // Safari and Chrome\n}\n.header_area .keyframe_cursor {\n    position: absolute;\n    border-top: 10px solid #f55;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    width: 0;\n    height: 0;\n    bottom: 0;\n    top: auto;\n    background: none;\n    cursor: pointer;\n}\n.keytime {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  font-size: 13px;\n  font-weight: bold;\n  color: #777;\n}\n.keytime:last-child {\n  max-width: 0px;\n}\n.keytime span {\n  display: inline-block;\n  transform: translate(-50%);\n  color: #eee;\n}\n.keytime .graduation {\n  position: absolute;\n  bottom: 0;\n  width: 1px;\n  height: 10px;\n  background: #777;\n  transform: translate(-50%);\n}\n.keytime .graduation.half {\n  left: 50%;\n  height: 7px;\n}\n.keytime .graduation.quarter {\n  left: 25%;\n  height: 5px;\n}\n.keytime .graduation.quarter3 {\n  left: 75%;\n  height: 5px;\n}\n.scroll_area {\n  position: relative;\n  width: 100%;\n  height: calc(100% - 30px);\n  overflow: auto;\n}\n.properties_area, .keyframes_area, .values_area {\n  display: inline-block;\n  position: relative;\n  font-size: 16px;\n  overflow: auto;\n}\n\n.properties_area::-webkit-scrollbar, .keyframes_area::-webkit-scrollbar {\n    display: none; // Safari and Chrome\n}\n.properties_area {\n  width: 30%;\n  max-width: 200px;\n  box-sizing: border-box;\n}\n.values_area {\n    width: 50px;\n    min-width: 50px;\n    display: inline-block;\n    border-right: 1px solid #999;\n    box-sizing: border-box;\n}\n.value input {\n    appearance: none;\n    -webkit-appearance: none;\n    outline: none;\n    position: relative;\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: none;\n    color: #ff5;\n    font-weight: bold;\n    background: none;\n    border: 0;\n    box-sizing: border-box;\n    text-align: center;\n}\n.value[data-object=\"1\"] input {\n    display: none;\n}\n.properties_scroll_area {\n  display: inline-block;\n  min-width: 100%;\n}\n.keyframes_area {\n  flex: 1;\n}\n.keyframes_scroll_area {\n  position: relative;\n  min-width: 300px;\n}\n.keyframes, .property, .value {\n  position: relative;\n  height: 25px;\n  border-bottom: 1px solid #777;\n  box-sizing: border-box;\n  white-space: nowrap;\n  background: rgba(73, 73, 73, 0.7);\n  z-index: 1;\n}\n.property:nth-child(2n), .keyframes:nth-child(2n), .value:nth-child(2n) {\n  background: rgba(90, 90, 90, 0.7);\n}\n.property {\n  line-height: 25px;\n  padding-left: 10px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: bold;\n  color: #eee;\n}\n.property.time_area {\n    color: #ff5;\n    line-height: 30px;\n}\n.property .arrow {\n    position: relative;\n    display: inline-block;\n    margin-right: 5px;\n    width: 0;\n    vertical-align: middle;\n}\n.property .arrow {\n    border-top: 6px solid #eee;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n}\n.property[data-fold=\"1\"] .arrow {\n    border-top: 4px solid transparent;\n    border-bottom: 4px solid transparent;\n    border-right: 0;\n    border-left: 6px solid #eee;\n    margin-left: 2px;\n}\n.property[data-object=\"0\"] .arrow {\n    display: none;\n}\n.property.fold, .keyframes.fold, .value.fold {\n    display: none;\n}\n.keyframes {\n\n}\n.keyframe_line {\n  position: absolute;\n  height: 8px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  background: #aaa;\n  z-index: 0;\n}\n.keyframe {\n  position: absolute;\n  font-size: 0px;\n  width: 12px;\n  height: 12px;\n  top: 0px;\n  bottom: 0px;\n  margin: auto;\n  background: #fff;\n  border: 2px solid #333;\n  border-radius: 2px;\n  box-sizing: border-box;\n  transform: translate(-50%) rotate(45deg);\n  z-index: 1;\n  cursor: pointer;\n}\n.keyframes_container, .line_area {\n  position: relative;\n  width: calc(100% - 30px);\n  left: 15px;\n  height: 100%;\n}\n.line_area {\n  position: absolute;\n  top: 0;\n  z-index: 0;\n}\n.keyframe_cursor {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  background: #f55;\n  width: 1px;\n  height: 100%;\n  left: 15px;\n  transform: translate(-50%);\n}\n.division_line {\n  position: absolute;\n  background: #333;\n  width: 1px;\n  height: 100%;\n  transform: translate(-50%);\n}\n`.replace(/\\.([^{,\\s\\d.]+)/g, `.${PREFIX}$1`);\n","import { PREFIX } from \"./consts\";\nimport Scene, { SceneItem, Frame } from \"scenejs\";\nimport {\n    hasClass as hasClass2,\n    addClass as addClass2,\n    removeClass as removeClass2,\n    isString,\n    IObject,\n    isObject,\n} from \"@daybrush/utils\";\nimport { ElementStructure } from \"./types\";\n\nexport function createElement(selector: string, parentEl?: Element) {\n    const classNames = selector.match(/\\.([^.#\\s])+/g) || [];\n    const tag = (selector.match(/^[^.#\\s]+/g) || [])[0] || \"div\";\n    const id = (selector.match(/#[^.#\\s]+/g) || [])[0] || \"\";\n    const el = document.createElement(tag);\n\n    id && (el.id = id.replace(/^#/g, \"\"));\n    el.className = classNames.map(name => `${PREFIX}${name.replace(/^\\./g, \"\")}`).join(\" \");\n\n    parentEl && parentEl.appendChild(el);\n    return el;\n}\nexport function keys(value: object) {\n    const arr = [];\n    for (const name in value) {\n        arr.push(name);\n    }\n    return arr;\n}\nexport function toValue(value: any) {\n    const type = typeof value;\n    if (type === \"object\") {\n        if (Array.isArray(value)) {\n            return `[${value.join(\", \")}]`;\n        }\n        return `{${keys(value).map(k => `${k}: ${toValue(value[k])}`).join(\", \")}}`;\n    }\n    return value;\n}\nexport function flatObject(obj: IObject<any>, newObj: IObject<any> = {}) {\n\n    for (const name in obj) {\n        const value = obj[name];\n\n        if (isObject(value)) {\n            const nextObj = flatObject(value.constructor.name === \"Frame\" ? (value as Frame).get() : value);\n\n            for (const nextName in nextObj) {\n                newObj[`${name}///${nextName}`] = nextObj[nextName];\n            }\n        } else {\n            newObj[name] = value;\n        }\n    }\n    return newObj;\n}\nexport function getTimelineInfo(scene: Scene) {\n  const timelineInfo = {};\n  scene.forEach((item: SceneItem) => {\n    const delay = item.getDelay();\n    const times = item.times;\n\n    times.forEach(time => {\n      const frame = item.getFrame(time);\n      (function forEach(...objs: any[]) {\n        const length = objs.length;\n        const lastObj = objs[length - 1];\n        const properties = objs.slice(0, -1);\n\n        const name = properties.join(\"///\");\n\n        if (name) {\n            if (!timelineInfo[name]) {\n                timelineInfo[name] = [];\n            }\n            const info = timelineInfo[name];\n\n            info.push([delay + time, lastObj]);\n        }\n\n        if (typeof lastObj === \"object\") {\n            Object.keys(lastObj).forEach(name2 => {\n                forEach(...properties, name2, lastObj[name2]);\n            });\n        }\n      })(item.getId(), frame.get());\n    });\n  });\n  return timelineInfo;\n}\n\nexport function getTarget(target: HTMLElement, conditionCallback: (el: Element) => boolean): HTMLElement {\n    let parentTarget = target;\n\n    while (parentTarget && parentTarget !== document.body) {\n        if (conditionCallback(parentTarget)) {\n            return parentTarget;\n        }\n        parentTarget = parentTarget.parentNode as HTMLElement;\n    }\n    return null;\n}\n\nexport function hasClass(target: Element, className: string) {\n    return hasClass2(target, `${PREFIX}${className}`);\n}\nexport function addClass(target: Element, className: string) {\n    return addClass2(target, `${PREFIX}${className}`);\n}\nexport function removeClass(target: Element, className: string) {\n    return removeClass2(target, `${PREFIX}${className}`);\n}\n\nexport function makeStructure<T>(\n    structure: ElementStructure,\n    parentEl?: Element,\n    obj: IObject<HTMLElement | HTMLElement[]> = {},\n): T {\n    const {selector, id, attr, dataset, children, style, html} = structure;\n    const el = createElement(selector);\n\n    if (id) {\n        if (id.indexOf(\"[]\") > -1) {\n            const objId = id.replace(\"[]\", \"\");\n\n            if (!obj[objId]) {\n                obj[objId] = [];\n            }\n            (obj[objId] as HTMLElement[]).push(el);\n        } else {\n            obj[id] = el;\n        }\n    }\n    if (dataset) {\n        for (const name in dataset) {\n            el.setAttribute(`data-${name}`, dataset[name]);\n        }\n    }\n    if (attr) {\n        for (const name in attr) {\n            el.setAttribute(name, attr[name]);\n        }\n    }\n    if (style) {\n        for (const name in style) {\n            el.style[name] = style[name];\n        }\n    }\n    if (html) {\n        el.innerHTML = html;\n    }\n    if (children) {\n        ([] as Array<string | ElementStructure>).concat(children).filter(child => child).forEach(child => {\n            if (isString(child)) {\n                makeStructure({ selector: child }, el, obj);\n            } else {\n                makeStructure(child, el, obj);\n            }\n        });\n    }\n    parentEl && parentEl.appendChild(el);\n\n    return (obj as any);\n}\n","import Scene from \"scenejs\";\nimport { getTimelineInfo, toValue, getTarget , hasClass, removeClass, addClass, makeStructure, flatObject} from \"./utils\";\nimport { drag } from \"@daybrush/drag\";\nimport { CSS, PREFIX } from \"./consts\";\nimport { isObject, isArray, IObject } from \"@daybrush/utils\";\nimport Axes, { PinchInput } from \"@egjs/axes\";\nimport { ElementStructure, Ids } from \"./types\";\n\nlet isExportCSS = false;\n\nexport default class Timeline {\n    private scene: Scene;\n    private ids: Ids;\n    constructor(scene: Scene, parentEl: HTMLElement) {\n        scene.finish();\n\n        this.scene = scene;\n        this.initElement(scene, parentEl);\n    }\n    public getElement() {\n        return this.ids.timeline;\n    }\n    private initElement(scene: Scene, parentEl: HTMLElement) {\n        const duration = scene.getDuration();\n        const timelineInfo = getTimelineInfo(scene);\n        const maxDuration = Math.ceil(duration);\n        const maxTime = maxDuration;\n        const keytimes: ElementStructure[] = [];\n        const properties: ElementStructure[] = [];\n        const values: ElementStructure[] = [];\n        const lines: ElementStructure[] = [];\n        const keyframesList: ElementStructure[] = [];\n        let timelineCSS: ElementStructure;\n        if (!isExportCSS) {\n            timelineCSS = {\n                selector: \"style.style\",\n                html: CSS,\n            };\n            isExportCSS = true;\n        }\n        for (let i = 0; i <= maxTime; ++i) {\n            const time = i;\n            keytimes.push({\n                selector: \".keytime\",\n                style: {\n                    width: `${100 / maxTime}%`,\n                },\n                children: [\n                    {\n                        selector: \"span\",\n                        html: `${time}s`,\n                    },\n                    \".graduation.start\",\n                    \".graduation.quarter\",\n                    \".graduation.half\",\n                    \".graduation.quarter3\",\n                ],\n            });\n\n            lines.push({\n                selector: \".division_line\",\n                style: {\n                    left: `${100 / maxTime * i}%`,\n                },\n            });\n        }\n        for (const property in timelineInfo) {\n            const propertyNames = property.split(\"///\");\n            const length = propertyNames.length;\n            const times = timelineInfo[property];\n            const id = propertyNames[length - 1];\n\n            properties.push({\n                id: \"properties[]\",\n                selector: \".property\",\n                dataset: {\n                    id,\n                    property,\n                    parent: propertyNames[length - 2] || \"\",\n                    object: \"0\",\n                    item: propertyNames[0],\n                },\n                style: {\n                    paddingLeft: `${10 + (length - 1) * 20}px`,\n                },\n                children: [\n                    \".arrow\",\n                    {\n                        selector: \"span\",\n                        html: id,\n                    },\n                ],\n            });\n            const isHasObject = times[0] && isObject(times[0][1]);\n            values.push({\n                id: \"values[]\",\n                selector: \".value\",\n                dataset: {\n                    property,\n                    object: isHasObject ? \"1\" : \"0\",\n                },\n                children: {\n                    id: \"inputs[]\",\n                    selector: \"input\",\n                    attr: {\n                        value: times[0] ? times[0][1] : \"\",\n                    },\n                },\n            });\n            const parentProperty = propertyNames.slice(0, -1).join(\"///\");\n            properties.forEach(({dataset}) => {\n                if (dataset.property === parentProperty) {\n                    dataset.object = \"1\";\n                }\n            });\n            const keyframeLines: ElementStructure[] = [];\n            const keyframes = times.map(([time, value], i) => {\n                const valueText = toValue(value);\n\n                if (times[i + 1]) {\n                    const [nextTime, nextValue] = times[i + 1];\n                    const nextValueText = toValue(nextValue);\n\n                    if (valueText === nextValueText) {\n                        keyframeLines.push({\n                            selector: \".keyframe_line\",\n                            style: {\n                                left: `${time / maxTime * 100}%`,\n                                width: `${(nextTime - time) / maxTime * 100}%`,\n                            },\n                        });\n                    }\n                }\n\n                return {\n                    selector: \".keyframe\",\n                    dataset: {\n                        time,\n                        value: valueText,\n                    },\n                    style: {\n                        left: `${time / maxTime * 100}%`,\n                    },\n                    html: `${time} ${valueText}`,\n                };\n            });\n            keyframesList.push({\n                id: \"keyframesList[]\",\n                selector: \".keyframes\",\n                dataset: {\n                    property,\n                },\n                children: {\n                    selector: \".keyframes_container\",\n                    children: [\n                        ...keyframes,\n                        ...keyframeLines,\n                    ],\n                },\n            });\n        }\n        const structure: ElementStructure = {\n            selector: \".timeline\",\n            id: \"timeline\",\n            children: [\n                timelineCSS,\n                {\n                    selector: \".header_area\",\n                    children: [\n                        {\n                            id: \"propertiesAreas[]\",\n                            selector: \".properties_area\",\n                            children: [\n                                {\n                                    id: \"timeArea\",\n                                    selector: \".property.time_area\",\n                                    html: \"0s\",\n                                },\n                            ],\n                        },\n                        {\n                            selector: \".values_area\",\n                            children: \".value\",\n                        },\n                        {\n                            id: \"keyframesAreas[]\",\n                            selector: \".keyframes_area\",\n                            children: {\n                                style: {\n                                    minWidth: `${50 * maxTime}px`,\n                                    width: `${(maxDuration ? maxTime / maxDuration : 1) * 100}%`,\n                                },\n                                id: \"keyframesScrollAreas[]\",\n                                selector: \".keyframes_scroll_area\",\n                                children: {\n                                    selector: \".keyframes\",\n                                    children: [\n                                        {\n                                            selector: \".keyframes_container\",\n                                            children: keytimes,\n                                        },\n                                        {\n                                            selector: \".keyframe_cursor\",\n                                            id: \"cursors[]\",\n                                        },\n                                    ],\n                                },\n                            },\n                        },\n                    ],\n                },\n                {\n                    id: \"scrollArea\",\n                    selector: \".scroll_area\",\n                    children: [\n                        {\n                            id: \"propertiesAreas[]\",\n                            selector: \".properties_area\",\n                            children: [\n                                {\n                                    selector: \".properties_scroll_area\",\n                                    children: properties,\n                                },\n                            ],\n                        },\n                        {\n                            id: \"valuesArea\",\n                            selector: \".values_area\",\n                            children: values,\n                        },\n                        {\n                            id: \"keyframesAreas[]\",\n                            selector: \".keyframes_area\",\n                            children: {\n                                style: {\n                                    minWidth: `${50 * maxTime}px`,\n                                    width: `${(maxDuration ? maxTime / maxDuration : 1) * 100}%`,\n                                },\n                                id: \"keyframesScrollAreas[]\",\n                                selector: \".keyframes_scroll_area\",\n                                children: [\n                                    ...keyframesList,\n                                    {\n                                        selector: \".keyframe_cursor\",\n                                        id: \"cursors[]\",\n                                    },\n                                    {\n                                        selector: \".line_area\",\n                                        children: lines,\n                                    },\n                                ],\n                            },\n                        },\n                    ],\n                },\n            ],\n        };\n\n        this.ids = makeStructure(structure, parentEl);\n        this.syncScroll();\n        this.wheelZoom();\n        this.drag();\n        this.fold();\n    }\n    private syncScroll() {\n        const {\n            keyframesAreas,\n        } = this.ids;\n        let isScrollKeyframe = false;\n\n        keyframesAreas[0].addEventListener(\"scroll\", () => {\n            if (isScrollKeyframe) {\n                isScrollKeyframe = false;\n            } else {\n                isScrollKeyframe = true;\n                keyframesAreas[1].scrollLeft = keyframesAreas[0].scrollLeft;\n            }\n        });\n        keyframesAreas[1].addEventListener(\"scroll\", () => {\n            if (isScrollKeyframe) {\n                isScrollKeyframe = false;\n            } else {\n                isScrollKeyframe = true;\n                keyframesAreas[0].scrollLeft = keyframesAreas[1].scrollLeft;\n            }\n        });\n    }\n    private wheelZoom() {\n        const { keyframesScrollAreas } = this.ids;\n        const originalWidth = parseFloat(keyframesScrollAreas[0].style.width);\n\n        const axes = new Axes({\n            zoom: {\n                range: [100, Infinity],\n            },\n        }, {}, {\n                zoom: originalWidth,\n            });\n        axes.connect(\"zoom\", new PinchInput(keyframesScrollAreas[1], {\n            scale: 0.7,\n            hammerManagerOptions: {\n                touchAction: \"auto\",\n            },\n        }));\n        axes.on(\"hold\", e => {\n            console.log(\"hold\");\n            if (e.inputEvent) {\n                e.inputEvent.preventDefault();\n            }\n        });\n        axes.on(\"change\", e => {\n            const width = e.pos.zoom;\n\n            keyframesScrollAreas.forEach(el => {\n                el.style.width = `${width}%`;\n            });\n\n            if (e.inputEvent) {\n                e.inputEvent.preventDefault();\n            }\n        });\n        keyframesScrollAreas[0].addEventListener(\"wheel\", e => {\n            const delta = e.deltaY;\n\n            axes.setBy({ zoom: delta / originalWidth * 5 });\n            !e.deltaX && e.preventDefault();\n        });\n    }\n    private fold() {\n        const {\n            keyframesList,\n            properties,\n            values,\n            propertiesAreas,\n        } = this.ids;\n\n        propertiesAreas[1].addEventListener(\"click\", e => {\n            const target = getTarget(e.target as HTMLElement, el => hasClass(el, \"property\"));\n\n            if (!target || target.getAttribute(\"data-object\") === \"0\") {\n                return;\n            }\n\n\n            const length = properties.length;\n            let index = properties.indexOf(target);\n\n            if (index === -1) {\n                return;\n            }\n\n            const isFold = target.getAttribute(\"data-fold\") === \"1\";\n\n            function fold(isPrevFold) {\n                const nextTarget = properties[index];\n                const nextProperty = nextTarget.getAttribute(\"data-property\");\n                const isNextFold = nextTarget.getAttribute(\"data-fold\") === \"1\";\n                const isNextObject = nextTarget.getAttribute(\"data-object\") === \"1\";\n\n                if (target !== nextTarget) {\n                    if (isFold) {\n                        if (!isPrevFold)  {\n                            removeClass(keyframesList[index], \"fold\");\n                            removeClass(values[index], \"fold\");\n                            removeClass(nextTarget, \"fold\");\n                        }\n                    } else {\n                        addClass(keyframesList[index], \"fold\");\n                        addClass(values[index], \"fold\");\n                        addClass(nextTarget, \"fold\");\n                    }\n                }\n                if (!isNextObject) {\n                    return;\n                }\n\n                for (++index; index < length; ++index) {\n                    const el = properties[index];\n\n                    if (\n                        // itemProperties\n                        el.getAttribute(\"data-property\").indexOf(nextProperty) > -1\n                    ) {\n                        // isChild\n                        fold(!isPrevFold && isNextFold);\n                    } else {\n                        --index;\n                        // not child\n                        break;\n                    }\n                }\n            }\n\n            fold(isFold);\n            target.setAttribute(\"data-fold\", isFold ? \"0\" : \"1\");\n        });\n    }\n    private setInputs(obj: IObject<any>) {\n        const valuesArea = this.ids.valuesArea;\n        for (const name in obj) {\n            valuesArea.querySelector<HTMLInputElement>(`[data-property=\"${name}\"] input`).value = obj[name];\n        }\n    }\n    private drag() {\n        const {\n            scrollArea,\n            timeArea,\n            cursors,\n            keyframesAreas,\n            keyframesScrollAreas,\n        } = this.ids;\n        const scene = this.scene;\n\n        scene.on(\"animate\", e => {\n            const time = e.time;\n            const maxDuration = Math.ceil(scene.getDuration());\n            const px = 15 - 30 * time / maxDuration;\n            const percent = 100 * time / maxDuration;\n            const left = `calc(${percent}% + ${px}px)`;\n\n            this.setInputs(flatObject(e.frames));\n            timeArea.innerHTML = `${time}s`;\n            cursors.forEach(cursor => {\n                cursor.style.left = left;\n            });\n        });\n        function move(clientX: number) {\n            const rect = keyframesScrollAreas[1].getBoundingClientRect();\n            const scrollAreaWidth = rect.width - 30;\n            const scrollAreaX = rect.left + 15;\n            const x = Math.min(scrollAreaWidth, Math.max(clientX - scrollAreaX, 0));\n            const percentage = x / scrollAreaWidth;\n            let time = scene.getDuration() * percentage;\n\n            time = Math.ceil(time * 20) / 20;\n            scene.setTime(time);\n        }\n        function click(e, clientX) {\n            const target = getTarget(e.target as HTMLElement, el => hasClass(el, \"keyframe\"));\n\n            if (target) {\n                scene.setTime(target.getAttribute(\"data-time\"));\n            } else if (!hasClass(e.target as Element, \"keyframe_cursor\")) {\n                move(clientX);\n            }\n            e.preventDefault();\n        }\n        drag(cursors[0], {\n            dragstart: ({inputEvent}) => {\n                inputEvent.stopPropagation();\n            },\n            drag: ({ clientX }) => {\n                move(clientX);\n            },\n            container: window,\n        });\n        keyframesScrollAreas.forEach(el => {\n            drag(el, {\n                container: window,\n                drag: ({ deltaX, deltaY, inputEvent }) => {\n                    keyframesAreas[1].scrollLeft -= deltaX;\n                    scrollArea.scrollTop -= deltaY;\n                    inputEvent.preventDefault();\n                },\n                dragend: ({ isDrag, clientX, inputEvent }) => {\n                    !isDrag && click(inputEvent, clientX);\n                },\n            });\n        });\n\n    }\n}\n"],"names":["PREFIX","CSS","replace","createElement","selector","parentEl","classNames","match","tag","id","el","document","className","map","name","join","appendChild","keys","value","arr","push","toValue","type","Array","isArray","k","flatObject","obj","newObj","isObject","nextObj","constructor","get","nextName","getTimelineInfo","scene","timelineInfo","forEach","item","delay","getDelay","times","time","frame","getFrame","_i","objs","length","lastObj","properties","slice","info","Object","name2","getId","getTarget","target","conditionCallback","parentTarget","body","parentNode","hasClass","hasClass2","addClass","addClass2","removeClass","removeClass2","makeStructure","structure","attr","dataset","children","style","html","indexOf","objId","setAttribute","innerHTML","concat","filter","child","isString","isExportCSS","finish","initElement","ids","timeline","duration","getDuration","maxDuration","Math","ceil","maxTime","keytimes","values","lines","keyframesList","timelineCSS","i","width","left","property","propertyNames","split","parent","object","paddingLeft","isHasObject","parentProperty","_a","keyframeLines","keyframes","valueText","_b","nextTime","nextValue","nextValueText","minWidth","syncScroll","wheelZoom","drag","fold","keyframesAreas","isScrollKeyframe","addEventListener","scrollLeft","keyframesScrollAreas","originalWidth","parseFloat","axes","Axes","zoom","range","Infinity","connect","PinchInput","scale","hammerManagerOptions","touchAction","on","e","console","log","inputEvent","preventDefault","pos","delta","deltaY","setBy","deltaX","propertiesAreas","getAttribute","index","isFold","isPrevFold","nextTarget","nextProperty","isNextFold","isNextObject","valuesArea","querySelector","scrollArea","timeArea","cursors","px","percent","_this","setInputs","frames","cursor","move","clientX","rect","getBoundingClientRect","scrollAreaWidth","scrollAreaX","x","min","max","percentage","setTime","click","dragstart","stopPropagation","container","window","scrollTop","dragend","isDrag"],"mappings":";;;;;;;;;;;;AAAO,IAAMA,MAAM,GAAG,mBAAf;AACP,AAAO,IAAMC,GAAG,GAAG,w3JAwPjBC,OAxPiB,CAwPT,kBAxPS,EAwPW,MAAIF,MAAJ,OAxPX,CAAZ;;SCWSG,cAAcC,UAAkBC;MACtCC,UAAU,GAAGF,QAAQ,CAACG,KAAT,CAAe,eAAf,KAAmC,EAAtD;MACMC,GAAG,GAAG,CAACJ,QAAQ,CAACG,KAAT,CAAe,YAAf,KAAgC,EAAjC,EAAqC,CAArC,KAA2C,KAAvD;MACME,EAAE,GAAG,CAACL,QAAQ,CAACG,KAAT,CAAe,YAAf,KAAgC,EAAjC,EAAqC,CAArC,KAA2C,EAAtD;MACMG,EAAE,GAAGC,QAAQ,CAACR,aAAT,CAAuBK,GAAvB,CAAX;EAEAC,EAAE,KAAKC,EAAE,CAACD,EAAH,GAAQA,EAAE,CAACP,OAAH,CAAW,KAAX,EAAkB,EAAlB,CAAb,CAAF;EACAQ,EAAE,CAACE,SAAH,GAAeN,UAAU,CAACO,GAAX,CAAe,UAAAC,IAAA;WAAQ,KAAGd,MAAH,GAAYc,IAAI,CAACZ,OAAL,CAAa,MAAb,EAAqB,EAArB,CAAZ;GAAvB,EAA+Da,IAA/D,CAAoE,GAApE,CAAf;EAEAV,QAAQ,IAAIA,QAAQ,CAACW,WAAT,CAAqBN,EAArB,CAAZ;SACOA,EAAP;;AAEJ,SAAgBO,KAAKC;MACXC,GAAG,GAAG,EAAZ;;OACK,IAAML,IAAX,IAAmBI,KAAnB,EAA0B;IACtBC,GAAG,CAACC,IAAJ,CAASN,IAAT;;;SAEGK,GAAP;;AAEJ,SAAgBE,QAAQH;MACdI,IAAI,GAAG,OAAOJ,KAApB;;MACII,IAAI,KAAK,QAAb,EAAuB;QACfC,KAAK,CAACC,OAAN,CAAcN,KAAd,CAAJ,EAA0B;aACf,MAAIA,KAAK,CAACH,IAAN,CAAW,IAAX,CAAJ,MAAP;;;WAEG,MAAIE,IAAI,CAACC,KAAD,CAAJ,CAAYL,GAAZ,CAAgB,UAAAY,CAAA;aAAQA,CAAC,OAAD,GAAMJ,OAAO,CAACH,KAAK,CAACO,CAAD,CAAN,CAAhB;KAArB,EAAmDV,IAAnD,CAAwD,IAAxD,CAAJ,MAAP;;;SAEGG,KAAP;;AAEJ,SAAgBQ,WAAWC,KAAmBC;uBAAA,EAAA;IAAAA,WAAA;;;OAErC,IAAMd,IAAX,IAAmBa,GAAnB,EAAwB;QACdT,KAAK,GAAGS,GAAG,CAACb,IAAD,CAAjB;;QAEIe,QAAQ,CAACX,KAAD,CAAZ,EAAqB;UACXY,OAAO,GAAGJ,UAAU,CAACR,KAAK,CAACa,WAAN,CAAkBjB,IAAlB,KAA2B,OAA3B,GAAsCI,KAAe,CAACc,GAAhB,EAAtC,GAA8Dd,KAA/D,CAA1B;;WAEK,IAAMe,QAAX,IAAuBH,OAAvB,EAAgC;QAC5BF,MAAM,CAAId,IAAI,QAAJ,GAAUmB,QAAd,CAAN,GAAkCH,OAAO,CAACG,QAAD,CAAzC;;KAJR,MAMO;MACHL,MAAM,CAACd,IAAD,CAAN,GAAeI,KAAf;;;;SAGDU,MAAP;;AAEJ,SAAgBM,gBAAgBC;MACxBC,YAAY,GAAG,EAArB;EACAD,KAAK,CAACE,OAAN,CAAc,UAACC,IAAD;QACNC,KAAK,GAAGD,IAAI,CAACE,QAAL,EAAd;QACMC,KAAK,GAAGH,IAAI,CAACG,KAAnB;IAEAA,KAAK,CAACJ,OAAN,CAAc,UAAAK,IAAA;UACNC,KAAK,GAAGL,IAAI,CAACM,QAAL,CAAcF,IAAd,CAAd;;OACC,SAASL,OAAT;qBAAiB;;aAAA,YAAAQ,uBAAAA;UAAAC,QAAA,gBAAA;;;YACVC,MAAM,GAAGD,IAAI,CAACC,MAApB;YACMC,OAAO,GAAGF,IAAI,CAACC,MAAM,GAAG,CAAV,CAApB;YACME,UAAU,GAAGH,IAAI,CAACI,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAnB;YAEMpC,IAAI,GAAGmC,UAAU,CAAClC,IAAX,CAAgB,KAAhB,CAAb;;YAEID,IAAJ,EAAU;cACF,CAACsB,YAAY,CAACtB,IAAD,CAAjB,EAAyB;YACrBsB,YAAY,CAACtB,IAAD,CAAZ,GAAqB,EAArB;;;cAEEqC,IAAI,GAAGf,YAAY,CAACtB,IAAD,CAAzB;UAEAqC,IAAI,CAAC/B,IAAL,CAAU,CAACmB,KAAK,GAAGG,IAAT,EAAeM,OAAf,CAAV;;;YAGA,OAAOA,OAAP,KAAmB,QAAvB,EAAiC;UAC7BI,MAAM,CAACnC,IAAP,CAAY+B,OAAZ,EAAqBX,OAArB,CAA6B,UAAAgB,KAAA;YACzBhB,OAAO,MAAP,OAAA,EAAWY,UAAU,OAAV,EAAYI,OAAOL,OAAO,CAACK,KAAD,EAA1B,CAAX;WADJ;;OAjBN,EAqBGf,IAAI,CAACgB,KAAL,EArBH,EAqBiBX,KAAK,CAACX,GAAN,EArBjB;KAFF;GAJF;SA8BOI,YAAP;;AAGF,SAAgBmB,UAAUC,QAAqBC;MACvCC,YAAY,GAAGF,MAAnB;;SAEOE,YAAY,IAAIA,YAAY,KAAK/C,QAAQ,CAACgD,IAAjD,EAAuD;QAC/CF,iBAAiB,CAACC,YAAD,CAArB,EAAqC;aAC1BA,YAAP;;;IAEJA,YAAY,GAAGA,YAAY,CAACE,UAA5B;;;SAEG,IAAP;;AAGJ,SAAgBC,SAASL,QAAiB5C;SAC/BkD,UAAS,CAACN,MAAD,EAAS,KAAGxD,MAAH,GAAYY,SAArB,CAAhB;;AAEJ,SAAgBmD,SAASP,QAAiB5C;SAC/BoD,UAAS,CAACR,MAAD,EAAS,KAAGxD,MAAH,GAAYY,SAArB,CAAhB;;AAEJ,SAAgBqD,YAAYT,QAAiB5C;SAClCsD,aAAY,CAACV,MAAD,EAAS,KAAGxD,MAAH,GAAYY,SAArB,CAAnB;;AAGJ,SAAgBuD,cACZC,WACA/D,UACAsB;oBAAA,EAAA;IAAAA,QAAA;;;MAEOvB,6BAAA;MAAUK,iBAAV;MAAc4D,qBAAd;MAAoBC,2BAApB;MAA6BC,6BAA7B;MAAuCC,uBAAvC;MAA8CC,qBAA9C;MACD/D,EAAE,GAAGP,aAAa,CAACC,QAAD,CAAxB;;MAEIK,EAAJ,EAAQ;QACAA,EAAE,CAACiE,OAAH,CAAW,IAAX,IAAmB,CAAC,CAAxB,EAA2B;UACjBC,KAAK,GAAGlE,EAAE,CAACP,OAAH,CAAW,IAAX,EAAiB,EAAjB,CAAd;;UAEI,CAACyB,GAAG,CAACgD,KAAD,CAAR,EAAiB;QACbhD,GAAG,CAACgD,KAAD,CAAH,GAAa,EAAb;;;MAEHhD,GAAG,CAACgD,KAAD,CAAH,CAA6BvD,IAA7B,CAAkCV,EAAlC;KANL,MAOO;MACHiB,GAAG,CAAClB,EAAD,CAAH,GAAUC,EAAV;;;;MAGJ4D,OAAJ,EAAa;SACJ,IAAMxD,IAAX,IAAmBwD,OAAnB,EAA4B;MACxB5D,EAAE,CAACkE,YAAH,CAAgB,UAAQ9D,IAAxB,EAAgCwD,OAAO,CAACxD,IAAD,CAAvC;;;;MAGJuD,IAAJ,EAAU;SACD,IAAMvD,IAAX,IAAmBuD,IAAnB,EAAyB;MACrB3D,EAAE,CAACkE,YAAH,CAAgB9D,IAAhB,EAAsBuD,IAAI,CAACvD,IAAD,CAA1B;;;;MAGJ0D,KAAJ,EAAW;SACF,IAAM1D,IAAX,IAAmB0D,KAAnB,EAA0B;MACtB9D,EAAE,CAAC8D,KAAH,CAAS1D,IAAT,IAAiB0D,KAAK,CAAC1D,IAAD,CAAtB;;;;MAGJ2D,IAAJ,EAAU;IACN/D,EAAE,CAACmE,SAAH,GAAeJ,IAAf;;;MAEAF,QAAJ,EAAc;OAC+BO,MAAxC,CAA+CP,QAA/C,EAAyDQ,MAAzD,CAAgE,UAAAC,KAAA;aAASA,KAAA;KAAzE,EAAgF3C,OAAhF,CAAwF,UAAA2C,KAAA;UACjFC,QAAQ,CAACD,KAAD,CAAZ,EAAqB;QACjBb,aAAa,CAAC;UAAE/D,QAAQ,EAAE4E;SAAb,EAAsBtE,EAAtB,EAA0BiB,GAA1B,CAAb;OADJ,MAEO;QACHwC,aAAa,CAACa,KAAD,EAAQtE,EAAR,EAAYiB,GAAZ,CAAb;;KAJP;;;EAQLtB,QAAQ,IAAIA,QAAQ,CAACW,WAAT,CAAqBN,EAArB,CAAZ;SAEQiB,GAAR;;;AC5JJ,IAAIuD,WAAW,GAAG,KAAlB;;AAEA;;;mBAGI,CAAY/C,KAAZ,EAA0B9B,QAA1B;IACI8B,KAAK,CAACgD,MAAN;SAEKhD,KAAL,GAAaA,KAAb;SACKiD,WAAL,CAAiBjD,KAAjB,EAAwB9B,QAAxB;;;;;oBAEG,GAAP;WACW,KAAKgF,GAAL,CAASC,QAAhB;GADG;;qBAGC,GAAR,UAAoBnD,KAApB,EAAkC9B,QAAlC;QACUkF,QAAQ,GAAGpD,KAAK,CAACqD,WAAN,EAAjB;QACMpD,YAAY,GAAGF,eAAe,CAACC,KAAD,CAApC;QACMsD,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAUJ,QAAV,CAApB;QACMK,OAAO,GAAGH,WAAhB;QACMI,QAAQ,GAAuB,EAArC;QACM5C,UAAU,GAAuB,EAAvC;QACM6C,MAAM,GAAuB,EAAnC;QACMC,KAAK,GAAuB,EAAlC;QACMC,aAAa,GAAuB,EAA1C;QACIC,WAAJ;;QACI,CAACf,WAAL,EAAkB;MACde,WAAW,GAAG;QACV7F,QAAQ,EAAE,aADA;QAEVqE,IAAI,EAAExE;OAFV;MAIAiF,WAAW,GAAG,IAAd;;;SAEC,IAAIgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIN,OAArB,EAA8B,EAAEM,CAAhC,EAAmC;UACzBxD,IAAI,GAAGwD,CAAb;MACAL,QAAQ,CAACzE,IAAT,CAAc;QACVhB,QAAQ,EAAE,UADA;QAEVoE,KAAK,EAAE;UACH2B,KAAK,EAAK,MAAMP,OAAN;SAHJ;QAKVrB,QAAQ,EAAE,CACN;UACInE,QAAQ,EAAE,MADd;UAEIqE,IAAI,EAAK/B,IAAI;SAHX,EAKN,mBALM,EAMN,qBANM,EAON,kBAPM,EAQN,sBARM;OALd;MAiBAqD,KAAK,CAAC3E,IAAN,CAAW;QACPhB,QAAQ,EAAE,gBADH;QAEPoE,KAAK,EAAE;UACH4B,IAAI,EAAK,MAAMR,OAAN,GAAgBM,CAAhB;;OAHjB;;;4BAOOG;UACDC,aAAa,GAAGD,QAAQ,CAACE,KAAT,CAAe,KAAf,CAAtB;UACMxD,MAAM,GAAGuD,aAAa,CAACvD,MAA7B;UACMN,KAAK,GAAGL,YAAY,CAACiE,QAAD,CAA1B;UACM5F,EAAE,GAAG6F,aAAa,CAACvD,MAAM,GAAG,CAAV,CAAxB;MAEAE,UAAU,CAAC7B,IAAX,CAAgB;QACZX,EAAE,EAAE,cADQ;QAEZL,QAAQ,EAAE,WAFE;QAGZkE,OAAO,EAAE;UACL7D,EAAE,IADG;UAEL4F,QAAQ,UAFH;UAGLG,MAAM,EAAEF,aAAa,CAACvD,MAAM,GAAG,CAAV,CAAb,IAA6B,EAHhC;UAIL0D,MAAM,EAAE,GAJH;UAKLnE,IAAI,EAAEgE,aAAa,CAAC,CAAD;SARX;QAUZ9B,KAAK,EAAE;UACHkC,WAAW,EAAK,KAAK,CAAC3D,MAAM,GAAG,CAAV,IAAe,EAApB;SAXR;QAaZwB,QAAQ,EAAE,CACN,QADM,EAEN;UACInE,QAAQ,EAAE,MADd;UAEIqE,IAAI,EAAEhE;SAJJ;OAbd;UAqBMkG,WAAW,GAAGlE,KAAK,CAAC,CAAD,CAAL,IAAYZ,QAAQ,CAACY,KAAK,CAAC,CAAD,CAAL,CAAS,CAAT,CAAD,CAAxC;MACAqD,MAAM,CAAC1E,IAAP,CAAY;QACRX,EAAE,EAAE,UADI;QAERL,QAAQ,EAAE,QAFF;QAGRkE,OAAO,EAAE;UACL+B,QAAQ,UADH;UAELI,MAAM,EAAEE,WAAW,GAAG,GAAH,GAAS;SALxB;QAORpC,QAAQ,EAAE;UACN9D,EAAE,EAAE,UADE;UAENL,QAAQ,EAAE,OAFJ;UAGNiE,IAAI,EAAE;YACFnD,KAAK,EAAEuB,KAAK,CAAC,CAAD,CAAL,GAAWA,KAAK,CAAC,CAAD,CAAL,CAAS,CAAT,CAAX,GAAyB;;;OAX5C;UAeMmE,cAAc,GAAGN,aAAa,CAACpD,KAAd,CAAoB,CAApB,EAAuB,CAAC,CAAxB,EAA2BnC,IAA3B,CAAgC,KAAhC,CAAvB;MACAkC,UAAU,CAACZ,OAAX,CAAmB,UAACwE,EAAD;YAAEvC;;YACbA,OAAO,CAAC+B,QAAR,KAAqBO,cAAzB,EAAyC;UACrCtC,OAAO,CAACmC,MAAR,GAAiB,GAAjB;;OAFR;UAKMK,aAAa,GAAuB,EAA1C;UACMC,SAAS,GAAGtE,KAAK,CAAC5B,GAAN,CAAU,UAACgG,EAAD,EAAgBX,CAAhB;YAAExD;YAAMxB;YAC1B8F,SAAS,GAAG3F,OAAO,CAACH,KAAD,CAAzB;;YAEIuB,KAAK,CAACyD,CAAC,GAAG,CAAL,CAAT,EAAkB;cACRe,iBAAA;cAACC,gBAAD;cAAWC,iBAAX;cACAC,aAAa,GAAG/F,OAAO,CAAC8F,SAAD,CAA7B;;cAEIH,SAAS,KAAKI,aAAlB,EAAiC;YAC7BN,aAAa,CAAC1F,IAAd,CAAmB;cACfhB,QAAQ,EAAE,gBADK;cAEfoE,KAAK,EAAE;gBACH4B,IAAI,EAAK1D,IAAI,GAAGkD,OAAP,GAAiB,GAAjB,MADN;gBAEHO,KAAK,EAAK,CAACe,QAAQ,GAAGxE,IAAZ,IAAoBkD,OAApB,GAA8B,GAA9B;;aAJlB;;;;eAUD;UACHxF,QAAQ,EAAE,WADP;UAEHkE,OAAO,EAAE;YACL5B,IAAI,MADC;YAELxB,KAAK,EAAE8F;WAJR;UAMHxC,KAAK,EAAE;YACH4B,IAAI,EAAK1D,IAAI,GAAGkD,OAAP,GAAiB,GAAjB;WAPV;UASHnB,IAAI,EAAK/B,IAAI,MAAJ,GAAQsE;SATrB;OAlBc,CAAlB;MA8BAhB,aAAa,CAAC5E,IAAd,CAAmB;QACfX,EAAE,EAAE,iBADW;QAEfL,QAAQ,EAAE,YAFK;QAGfkE,OAAO,EAAE;UACL+B,QAAQ;SAJG;QAMf9B,QAAQ,EAAE;UACNnE,QAAQ,EAAE,sBADJ;UAENmE,QAAQ,EACDwC,SAAS,OAAT,CACAD,aADA;;OATf;;;SAhFC,IAAMT,QAAX,IAAuBjE,YAAvB;cAAWiE;;;QA+FLjC,SAAS,GAAqB;MAChChE,QAAQ,EAAE,WADsB;MAEhCK,EAAE,EAAE,UAF4B;MAGhC8D,QAAQ,EAAE,CACN0B,WADM,EAEN;QACI7F,QAAQ,EAAE,cADd;QAEImE,QAAQ,EAAE,CACN;UACI9D,EAAE,EAAE,mBADR;UAEIL,QAAQ,EAAE,kBAFd;UAGImE,QAAQ,EAAE,CACN;YACI9D,EAAE,EAAE,UADR;YAEIL,QAAQ,EAAE,qBAFd;YAGIqE,IAAI,EAAE;WAJJ;SAJR,EAYN;UACIrE,QAAQ,EAAE,cADd;UAEImE,QAAQ,EAAE;SAdR,EAgBN;UACI9D,EAAE,EAAE,kBADR;UAEIL,QAAQ,EAAE,iBAFd;UAGImE,QAAQ,EAAE;YACNC,KAAK,EAAE;cACH6C,QAAQ,EAAK,KAAKzB,OAAL,OADV;cAEHO,KAAK,EAAK,CAACV,WAAW,GAAGG,OAAO,GAAGH,WAAb,GAA2B,CAAvC,IAA4C,GAA5C;aAHR;YAKNhF,EAAE,EAAE,wBALE;YAMNL,QAAQ,EAAE,wBANJ;YAONmE,QAAQ,EAAE;cACNnE,QAAQ,EAAE,YADJ;cAENmE,QAAQ,EAAE,CACN;gBACInE,QAAQ,EAAE,sBADd;gBAEImE,QAAQ,EAAEsB;eAHR,EAKN;gBACIzF,QAAQ,EAAE,kBADd;gBAEIK,EAAE,EAAE;eAPF;;;SA5BhB;OAJR,EA+CN;QACIA,EAAE,EAAE,YADR;QAEIL,QAAQ,EAAE,cAFd;QAGImE,QAAQ,EAAE,CACN;UACI9D,EAAE,EAAE,mBADR;UAEIL,QAAQ,EAAE,kBAFd;UAGImE,QAAQ,EAAE,CACN;YACInE,QAAQ,EAAE,yBADd;YAEImE,QAAQ,EAAEtB;WAHR;SAJR,EAWN;UACIxC,EAAE,EAAE,YADR;UAEIL,QAAQ,EAAE,cAFd;UAGImE,QAAQ,EAAEuB;SAdR,EAgBN;UACIrF,EAAE,EAAE,kBADR;UAEIL,QAAQ,EAAE,iBAFd;UAGImE,QAAQ,EAAE;YACNC,KAAK,EAAE;cACH6C,QAAQ,EAAK,KAAKzB,OAAL,OADV;cAEHO,KAAK,EAAK,CAACV,WAAW,GAAGG,OAAO,GAAGH,WAAb,GAA2B,CAAvC,IAA4C,GAA5C;aAHR;YAKNhF,EAAE,EAAE,wBALE;YAMNL,QAAQ,EAAE,wBANJ;YAONmE,QAAQ,EACDyB,aAAa,OAAb,EACH;cACI5F,QAAQ,EAAE,kBADd;cAEIK,EAAE,EAAE;eAER;cACIL,QAAQ,EAAE,YADd;cAEImE,QAAQ,EAAEwB;cAPX;;SA3BT;OAlDR;KAHd;SAiGKV,GAAL,GAAWlB,aAAa,CAACC,SAAD,EAAY/D,QAAZ,CAAxB;SACKiH,UAAL;SACKC,SAAL;SACKC,IAAL;SACKC,IAAL;GAhPI;;oBAkPA,GAAR;QAEQC,wCAAA;QAEAC,gBAAgB,GAAG,KAAvB;IAEAD,cAAc,CAAC,CAAD,CAAd,CAAkBE,gBAAlB,CAAmC,QAAnC,EAA6C;UACrCD,gBAAJ,EAAsB;QAClBA,gBAAgB,GAAG,KAAnB;OADJ,MAEO;QACHA,gBAAgB,GAAG,IAAnB;QACAD,cAAc,CAAC,CAAD,CAAd,CAAkBG,UAAlB,GAA+BH,cAAc,CAAC,CAAD,CAAd,CAAkBG,UAAjD;;KALR;IAQAH,cAAc,CAAC,CAAD,CAAd,CAAkBE,gBAAlB,CAAmC,QAAnC,EAA6C;UACrCD,gBAAJ,EAAsB;QAClBA,gBAAgB,GAAG,KAAnB;OADJ,MAEO;QACHA,gBAAgB,GAAG,IAAnB;QACAD,cAAc,CAAC,CAAD,CAAd,CAAkBG,UAAlB,GAA+BH,cAAc,CAAC,CAAD,CAAd,CAAkBG,UAAjD;;KALR;GAdI;;mBAuBA,GAAR;QACYC,oDAAA;QACFC,aAAa,GAAGC,UAAU,CAACF,oBAAoB,CAAC,CAAD,CAApB,CAAwBtD,KAAxB,CAA8B2B,KAA/B,CAAhC;QAEM8B,IAAI,GAAG,IAAIC,IAAJ,CAAS;MAClBC,IAAI,EAAE;QACFC,KAAK,EAAE,CAAC,GAAD,EAAMC,QAAN;;KAFF,EAIV,EAJU,EAIN;MACCF,IAAI,EAAEJ;KALD,CAAb;IAOAE,IAAI,CAACK,OAAL,CAAa,MAAb,EAAqB,IAAIC,UAAJ,CAAeT,oBAAoB,CAAC,CAAD,CAAnC,EAAwC;MACzDU,KAAK,EAAE,GADkD;MAEzDC,oBAAoB,EAAE;QAClBC,WAAW,EAAE;;KAHA,CAArB;IAMAT,IAAI,CAACU,EAAL,CAAQ,MAAR,EAAgB,UAAAC,CAAA;MACZC,OAAO,CAACC,GAAR,CAAY,MAAZ;;UACIF,CAAC,CAACG,UAAN,EAAkB;QACdH,CAAC,CAACG,UAAF,CAAaC,cAAb;;KAHR;IAMAf,IAAI,CAACU,EAAL,CAAQ,QAAR,EAAkB,UAAAC,CAAA;UACRzC,KAAK,GAAGyC,CAAC,CAACK,GAAF,CAAMd,IAApB;MAEAL,oBAAoB,CAACzF,OAArB,CAA6B,UAAA3B,EAAA;QACzBA,EAAE,CAAC8D,KAAH,CAAS2B,KAAT,GAAoBA,KAAK,MAAzB;OADJ;;UAIIyC,CAAC,CAACG,UAAN,EAAkB;QACdH,CAAC,CAACG,UAAF,CAAaC,cAAb;;KARR;IAWAlB,oBAAoB,CAAC,CAAD,CAApB,CAAwBF,gBAAxB,CAAyC,OAAzC,EAAkD,UAAAgB,CAAA;UACxCM,KAAK,GAAGN,CAAC,CAACO,MAAhB;MAEAlB,IAAI,CAACmB,KAAL,CAAW;QAAEjB,IAAI,EAAEe,KAAK,GAAGnB,aAAR,GAAwB;OAA3C;OACCa,CAAC,CAACS,MAAH,IAAaT,CAAC,CAACI,cAAF,EAAb;KAJJ;GAlCI;;cAyCA,GAAR;QACUnC,aAAA;QACFb,gCADE;QAEF/C,0BAFE;QAGF6C,kBAHE;QAIFwD,oCAJE;IAONA,eAAe,CAAC,CAAD,CAAf,CAAmB1B,gBAAnB,CAAoC,OAApC,EAA6C,UAAAgB,CAAA;UACnCpF,MAAM,GAAGD,SAAS,CAACqF,CAAC,CAACpF,MAAH,EAA0B,UAAA9C,EAAA;eAAMmD,QAAQ,CAACnD,EAAD,EAAK,UAAL,CAAR;OAAhC,CAAxB;;UAEI,CAAC8C,MAAD,IAAWA,MAAM,CAAC+F,YAAP,CAAoB,aAApB,MAAuC,GAAtD,EAA2D;;;;UAKrDxG,MAAM,GAAGE,UAAU,CAACF,MAA1B;UACIyG,KAAK,GAAGvG,UAAU,CAACyB,OAAX,CAAmBlB,MAAnB,CAAZ;;UAEIgG,KAAK,KAAK,CAAC,CAAf,EAAkB;;;;UAIZC,MAAM,GAAGjG,MAAM,CAAC+F,YAAP,CAAoB,WAApB,MAAqC,GAApD;;eAES9B,IAAT,CAAciC,UAAd;YACUC,UAAU,GAAG1G,UAAU,CAACuG,KAAD,CAA7B;YACMI,YAAY,GAAGD,UAAU,CAACJ,YAAX,CAAwB,eAAxB,CAArB;YACMM,UAAU,GAAGF,UAAU,CAACJ,YAAX,CAAwB,WAAxB,MAAyC,GAA5D;YACMO,YAAY,GAAGH,UAAU,CAACJ,YAAX,CAAwB,aAAxB,MAA2C,GAAhE;;YAEI/F,MAAM,KAAKmG,UAAf,EAA2B;cACnBF,MAAJ,EAAY;gBACJ,CAACC,UAAL,EAAkB;cACdzF,WAAW,CAAC+B,aAAa,CAACwD,KAAD,CAAd,EAAuB,MAAvB,CAAX;cACAvF,WAAW,CAAC6B,MAAM,CAAC0D,KAAD,CAAP,EAAgB,MAAhB,CAAX;cACAvF,WAAW,CAAC0F,UAAD,EAAa,MAAb,CAAX;;WAJR,MAMO;YACH5F,QAAQ,CAACiC,aAAa,CAACwD,KAAD,CAAd,EAAuB,MAAvB,CAAR;YACAzF,QAAQ,CAAC+B,MAAM,CAAC0D,KAAD,CAAP,EAAgB,MAAhB,CAAR;YACAzF,QAAQ,CAAC4F,UAAD,EAAa,MAAb,CAAR;;;;YAGJ,CAACG,YAAL,EAAmB;;;;aAId,EAAEN,KAAP,EAAcA,KAAK,GAAGzG,MAAtB,EAA8B,EAAEyG,KAAhC,EAAuC;cAC7B9I,EAAE,GAAGuC,UAAU,CAACuG,KAAD,CAArB;;;UAII9I,EAAE,CAAC6I,YAAH,CAAgB,eAAhB,EAAiC7E,OAAjC,CAAyCkF,YAAzC,IAAyD,CAAC,CAF9D,EAGE;;YAEEnC,IAAI,CAAC,CAACiC,UAAD,IAAeG,UAAhB,CAAJ;WALJ,MAMO;cACDL,KAAF,CADG;;;;;;;MAQf/B,IAAI,CAACgC,MAAD,CAAJ;MACAjG,MAAM,CAACoB,YAAP,CAAoB,WAApB,EAAiC6E,MAAM,GAAG,GAAH,GAAS,GAAhD;KA1DJ;GARI;;mBAqEA,GAAR,UAAkB9H,GAAlB;QACUoI,UAAU,GAAG,KAAK1E,GAAL,CAAS0E,UAA5B;;SACK,IAAMjJ,IAAX,IAAmBa,GAAnB,EAAwB;MACpBoI,UAAU,CAACC,aAAX,CAA2C,sBAAmBlJ,IAAnB,cAA3C,EAA8EI,KAA9E,GAAsFS,GAAG,CAACb,IAAD,CAAzF;;GAHA;;cAMA,GAAR;oBAAA;;QACU+F,aAAA;QACFoD,0BADE;QAEFC,sBAFE;QAGFC,oBAHE;QAIFzC,kCAJE;QAKFI,8CALE;QAOA3F,KAAK,GAAG,KAAKA,KAAnB;IAEAA,KAAK,CAACwG,EAAN,CAAS,SAAT,EAAoB,UAAAC,CAAA;UACVlG,IAAI,GAAGkG,CAAC,CAAClG,IAAf;UACM+C,WAAW,GAAGC,IAAI,CAACC,IAAL,CAAUxD,KAAK,CAACqD,WAAN,EAAV,CAApB;UACM4E,EAAE,GAAG,KAAK,KAAK1H,IAAL,GAAY+C,WAA5B;UACM4E,OAAO,GAAG,MAAM3H,IAAN,GAAa+C,WAA7B;UACMW,IAAI,GAAG,UAAQiE,OAAR,SAAA,GAAsBD,EAAtB,QAAb;;MAEAE,KAAI,CAACC,SAAL,CAAe7I,UAAU,CAACkH,CAAC,CAAC4B,MAAH,CAAzB;;MACAN,QAAQ,CAACrF,SAAT,GAAwBnC,IAAI,MAA5B;MACAyH,OAAO,CAAC9H,OAAR,CAAgB,UAAAoI,MAAA;QACZA,MAAM,CAACjG,KAAP,CAAa4B,IAAb,GAAoBA,IAApB;OADJ;KATJ;;aAaSsE,IAAT,CAAcC,OAAd;UACUC,IAAI,GAAG9C,oBAAoB,CAAC,CAAD,CAApB,CAAwB+C,qBAAxB,EAAb;UACMC,eAAe,GAAGF,IAAI,CAACzE,KAAL,GAAa,EAArC;UACM4E,WAAW,GAAGH,IAAI,CAACxE,IAAL,GAAY,EAAhC;UACM4E,CAAC,GAAGtF,IAAI,CAACuF,GAAL,CAASH,eAAT,EAA0BpF,IAAI,CAACwF,GAAL,CAASP,OAAO,GAAGI,WAAnB,EAAgC,CAAhC,CAA1B,CAAV;UACMI,UAAU,GAAGH,CAAC,GAAGF,eAAvB;UACIpI,IAAI,GAAGP,KAAK,CAACqD,WAAN,KAAsB2F,UAAjC;MAEAzI,IAAI,GAAGgD,IAAI,CAACC,IAAL,CAAUjD,IAAI,GAAG,EAAjB,IAAuB,EAA9B;MACAP,KAAK,CAACiJ,OAAN,CAAc1I,IAAd;;;aAEK2I,KAAT,CAAezC,CAAf,EAAkB+B,OAAlB;UACUnH,MAAM,GAAGD,SAAS,CAACqF,CAAC,CAACpF,MAAH,EAA0B,UAAA9C,EAAA;eAAMmD,QAAQ,CAACnD,EAAD,EAAK,UAAL,CAAR;OAAhC,CAAxB;;UAEI8C,MAAJ,EAAY;QACRrB,KAAK,CAACiJ,OAAN,CAAc5H,MAAM,CAAC+F,YAAP,CAAoB,WAApB,CAAd;OADJ,MAEO,IAAI,CAAC1F,QAAQ,CAAC+E,CAAC,CAACpF,MAAH,EAAsB,iBAAtB,CAAb,EAAuD;QAC1DkH,IAAI,CAACC,OAAD,CAAJ;;;MAEJ/B,CAAC,CAACI,cAAF;;;IAEJxB,IAAI,CAAC2C,OAAO,CAAC,CAAD,CAAR,EAAa;MACbmB,SAAS,EAAE,UAACzE,EAAD;YAAEkC;QACTA,UAAU,CAACwC,eAAX;OAFS;MAIb/D,IAAI,EAAE,UAACX,EAAD;YAAG8D;QACLD,IAAI,CAACC,OAAD,CAAJ;OALS;MAOba,SAAS,EAAEC;KAPX,CAAJ;IASA3D,oBAAoB,CAACzF,OAArB,CAA6B,UAAA3B,EAAA;MACzB8G,IAAI,CAAC9G,EAAD,EAAK;QACL8K,SAAS,EAAEC,MADN;QAELjE,IAAI,EAAE,UAACX,EAAD;cAAGwC;cAAQF;cAAQJ;UACrBrB,cAAc,CAAC,CAAD,CAAd,CAAkBG,UAAlB,IAAgCwB,MAAhC;UACAY,UAAU,CAACyB,SAAX,IAAwBvC,MAAxB;UACAJ,UAAU,CAACC,cAAX;SALC;QAOL2C,OAAO,EAAE,UAAC9E,EAAD;cAAG+E;cAAQjB;cAAS5B;WACxB6C,MAAD,IAAWP,KAAK,CAACtC,UAAD,EAAa4B,OAAb,CAAhB;;OARJ,CAAJ;KADJ;GArDI;;iBAoEZ;GA7cA;;;;"}