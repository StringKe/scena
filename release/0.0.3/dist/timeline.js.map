{"version":3,"file":"timeline.js","sources":["../src/consts.ts","../src/utils.ts","../src/Timeline.ts"],"sourcesContent":["export const PREFIX = `scenejs_timeline_`;\n\nexport const FOLD_CLASS = `${PREFIX}fold`;\nexport const CSS = `\n.timeline {\n  position: relative;\n  font-size: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.sticky_area, .scroll_area {\n   width: 100%;\n   position: relative;\n  display: flex;\n  -webkit-align-items: flex-start;\n  align-items: flex-start;\n}\n.sticky_area {\n  position: relative;\n  z-index: 10;\n  top: 0;\n  min-height: 30px;\n  height: 30px;\n}\n.sticky_area .keyframes {\n  padding: 0px;\n}\n.sticky_area .properties_area,\n.sticky_area .properties,\n.sticky_area .keyframes_area,\n.sticky_area .keyframes_scroll_area,\n.sticky_area .keyframes {\n  height: 100%;\n}\n.sticky_area .keyframes_area::-webkit-scrollbar {\n    display: none; // Safari and Chrome\n}\n.sticky_area .keyframe_cursor {\n    position: absolute;\n    border-top: 10px solid #f55;\n    border-left: 5px solid transparent;\n    border-right: 5px solid transparent;\n    width: 0;\n    height: 0;\n    bottom: 0;\n    top: auto;\n    background: none;\n    cursor: pointer;\n}\n.keytime {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  font-size: 13px;\n  font-weight: bold;\n  color: #777;\n}\n.keytime:last-child {\n  max-width: 0px;\n}\n.keytime span {\n  display: inline-block;\n  transform: translate(-50%);\n  color: #eee;\n}\n.keytime .graduation {\n  position: absolute;\n  bottom: 0;\n  width: 1px;\n  height: 10px;\n  background: #999;\n  transform: translate(-50%);\n}\n.keytime .graduation.half {\n  left: 50%;\n  height: 7px;\n}\n.keytime .graduation.quarter {\n  left: 25%;\n  height: 5px;\n}\n.keytime .graduation.quarter3 {\n  left: 75%;\n  height: 5px;\n}\n.scroll_area {\n  position: relative;\n  width: 100%;\n  height: calc(100% - 30px);\n  overflow: auto;\n}\n.properties_area, .keyframes_area {\n  display: inline-block;\n  position: relative;\n  font-size: 16px;\n  overflow: auto;\n}\n\n.properties_area::-webkit-scrollbar, .keyframes_area::-webkit-scrollbar {\n    display: none; // Safari and Chrome\n}\n.properties_area {\n  width: 30%;\n  max-width: 200px;\n  border-right: 1px solid #999;\n  box-sizing: border-box;\n}\n.properties_scroll_area {\n  display: inline-block;\n  min-width: 100%;\n}\n.keyframes_area {\n  flex: 1;\n}\n.keyframes_scroll_area {\n  position: relative;\n  min-width: 300px;\n}\n.keyframes, .properties {\n  position: relative;\n  height: 25px;\n  border-bottom: 1px solid #777;\n  box-sizing: border-box;\n  white-space: nowrap;\n  background: rgba(73, 73, 73, 0.7);\n  z-index: 1;\n}\n.properties:nth-child(2n), .keyframes:nth-child(2n) {\n  background: rgba(90, 90, 90, 0.7);\n}\n.properties {\n  line-height: 25px;\n  padding-left: 10px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: bold;\n  color: #eee;\n}\n\n.properties .arrow {\n    position: relative;\n    display: inline-block;\n    margin-right: 5px;\n    width: 0;\n    vertical-align: middle;\n}\n.properties .arrow {\n    border-top: 6px solid #eee;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n}\n.properties[data-fold=\"1\"] .arrow {\n    border-top: 4px solid transparent;\n    border-bottom: 4px solid transparent;\n    border-right: 0;\n    border-left: 6px solid #eee;\n    margin-left: 2px;\n}\n.properties[data-object=\"0\"] .arrow {\n    display: none;\n}\n.properties.fold, .keyframes.fold {\n    display: none;\n}\n.keyframes {\n\n}\n.keyframe_line {\n  position: absolute;\n  height: 8px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  background: #aaa;\n  z-index: 0;\n}\n.keyframe {\n  position: absolute;\n  font-size: 0px;\n  width: 12px;\n  height: 12px;\n  top: 0px;\n  bottom: 0px;\n  margin: auto;\n  background: #fff;\n  border: 2px solid #333;\n  border-radius: 2px;\n  box-sizing: border-box;\n  transform: translate(-50%) rotate(45deg);\n  z-index: 1;\n  cursor: pointer;\n}\n.keyframes_container, .line_area {\n  position: relative;\n  width: calc(100% - 30px);\n  left: 15px;\n  height: 100%;\n}\n.line_area {\n  position: absolute;\n  top: 0;\n  z-index: 0;\n}\n.keyframe_cursor {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  background: #f55;\n  width: 1px;\n  height: 100%;\n  left: 15px;\n  transform: translate(-50%);\n}\n.division_line {\n  position: absolute;\n  background: #333;\n  width: 1px;\n  height: 100%;\n  transform: translate(-50%);\n}\n`.replace(/\\.([^{,\\s\\d.]+)/g, `.${PREFIX}$1`);\n","import { PREFIX } from \"./consts\";\nimport Scene, { SceneItem } from \"scenejs\";\n\nexport function createElement(selector: string, parentEl?: Element) {\n    const classNames = selector.match(/\\.([^.#\\s])+/g) || [];\n    const tag = (selector.match(/^[^.#\\s]+/g) || [])[0] || \"div\";\n    const id = (selector.match(/#[^.#\\s]+/g) || [])[0] || \"\";\n    const el = document.createElement(tag);\n\n    id && (el.id = id.replace(/^#/g, \"\"));\n    el.className = classNames.map(name => `${PREFIX}${name.replace(/^\\./g, \"\")}`).join(\" \");\n\n    parentEl && parentEl.appendChild(el);\n    return el;\n}\nexport function keys(value: object) {\n    const arr = [];\n    for (const name in value) {\n        arr.push(name);\n    }\n    return arr;\n}\nexport function toValue(value: any) {\n    const type = typeof value;\n    if (type === \"object\") {\n        if (Array.isArray(value)) {\n            return `[${value.join(\", \")}]`;\n        }\n        return `{${keys(value).map(k => `${k}: ${toValue(value[k])}`).join(\", \")}}`;\n    }\n    return value;\n}\nexport function getTimelineInfo(scene: Scene) {\n  const timelineInfo = {};\n  scene.forEach((item: SceneItem) => {\n    const delay = item.getDelay();\n    const times = item.times;\n\n    times.forEach(time => {\n      const frame = item.getFrame(time);\n      (function forEach(...objs: any[]) {\n        const length = objs.length;\n        const lastObj = objs[length - 1];\n        const properties = objs.slice(0, -1);\n\n        const name = properties.join(\"///\");\n\n        if (name) {\n            if (!timelineInfo[name]) {\n                timelineInfo[name] = [];\n            }\n            const info = timelineInfo[name];\n\n            info.push([delay + time, lastObj]);\n        }\n\n        if (typeof lastObj === \"object\") {\n            Object.keys(lastObj).forEach(name2 => {\n                forEach(...properties, name2, lastObj[name2]);\n            });\n        }\n      })(item.getId(), frame.get());\n    });\n  });\n  return timelineInfo;\n}\n\nexport function getTarget(target: Element, conditionCallback: (el: Element) => boolean): Element {\n    let parentTarget = target;\n\n    while (parentTarget && parentTarget !== document.body) {\n        if (conditionCallback(parentTarget)) {\n            return parentTarget;\n        }\n        parentTarget = parentTarget.parentNode as Element;\n    }\n    return null;\n}\n","import Scene from \"scenejs\";\nimport { getTimelineInfo, createElement, toValue, getTarget } from \"./utils\";\nimport { drag } from \"@daybrush/drag\";\nimport { CSS, PREFIX, FOLD_CLASS } from \"./consts\";\nimport { hasClass, toArray, isArray, addClass, removeClass } from \"@daybrush/utils\";\nimport Axes, { PinchInput } from \"@egjs/axes\";\n\nlet isExportCSS = false;\n\n/*\n.timeline\n    .stick_area\n        .properties_area\n            .properties\n        .keyframes_area\n            .keyframes_scroll_area\n                .keyframes\n                    .keyframes_container\n                        .keytime * N\n                .keyframe_cursor\n    .scroll_area\n        .properties_area\n            .properties_scroll_area\n                .properties * N\n        .keyframes_area\n            .keyframes_scroll_area\n                .keyframes * N\n                    .keyframes_container\n                        .keyframe * N\n\n*/\nexport default class Timeline {\n    private scene: Scene;\n    private timelineEl: HTMLElement;\n    private cursorHeaderEl: HTMLElement;\n    private cursorEl: HTMLElement;\n    private keyframesScrollAreaEl: HTMLElement;\n    private keyframesHeaderScrollAreaEl: HTMLElement;\n    private keyframesAreaEl: HTMLElement;\n    private keyframesHeaderAreaEl: HTMLElement;\n    private propertiesAreaEl: HTMLElement;\n    private scrollAreaEl: HTMLElement;\n    constructor(scene: Scene, parentEl: HTMLElement) {\n        scene.finish();\n\n        this.scene = scene;\n        this.initElement(scene, parentEl);\n    }\n    public getElement() {\n        return this.timelineEl;\n    }\n    private initElement(scene: Scene, parentEl: HTMLElement) {\n        const duration = scene.getDuration();\n        const timelineInfo = getTimelineInfo(scene);\n        const timelineEl = createElement(\".timeline\");\n        if (!isExportCSS) {\n            const timelineStyleEl = createElement(\"style.timeline_style\", timelineEl);\n\n            timelineStyleEl.innerHTML = CSS;\n            isExportCSS = true;\n        }\n        const stickyAreaEl = createElement(\".sticky_area\", timelineEl);\n        const propertiesHeaderAreaEl = createElement(\".properties_area\", stickyAreaEl);\n        const keyframesHeaderAreaEl = createElement(\".keyframes_area\", stickyAreaEl);\n        const propertyHeaderEl = createElement(\".properties\", propertiesHeaderAreaEl);\n        const keyframesHeaderScrollAreaEl = createElement(\".keyframes_scroll_area\", keyframesHeaderAreaEl);\n        const keyframesHeaderEl = createElement(\".keyframes\", keyframesHeaderScrollAreaEl);\n        const keyframesHeadeerContainerEl = createElement(\".keyframes_container\", keyframesHeaderEl);\n        const cursorHeaderEl = createElement(\".keyframe_cursor\", keyframesHeaderScrollAreaEl);\n        const cursorEl = createElement(\".keyframe_cursor\");\n\n        propertyHeaderEl.innerHTML = \"Item Name\";\n\n        const scrollAreaEl = createElement(\".scroll_area\", timelineEl);\n        const propertiesAreaEl = createElement(\".properties_area\", scrollAreaEl);\n        const propertiesScrollAreaEl = createElement(\".properties_scroll_area\", propertiesAreaEl);\n        const keyframesAreaEl = createElement(\".keyframes_area\", scrollAreaEl);\n        const keyframesScrollAreaEl = createElement(\".keyframes_scroll_area\", keyframesAreaEl);\n        const lineAreaEl = createElement(\".line_area\");\n        const maxDuration = Math.ceil(duration);\n        const maxTime = maxDuration;\n\n        keyframesHeaderScrollAreaEl.style.minWidth = `${50 * maxTime}px`;\n        keyframesScrollAreaEl.style.minWidth = `${50 * maxTime}px`;\n        keyframesHeaderScrollAreaEl.style.width = `${(maxDuration ? maxTime / maxDuration : 1) * 100}%`;\n        keyframesScrollAreaEl.style.width = `${(maxDuration ? maxTime / maxDuration : 1) * 100}%`;\n\n        for (let i = 0; i <= maxTime; ++i) {\n            const time = i;\n            const keytimeEl = createElement(\".keytime\", keyframesHeadeerContainerEl);\n\n            keytimeEl.style.width = `${100 / maxTime}%`;\n            createElement(\"span\", keytimeEl).innerHTML = `${time}s`;\n            createElement(\".graduation.start\", keytimeEl);\n            createElement(\".graduation.quarter\", keytimeEl);\n            createElement(\".graduation.half\", keytimeEl);\n            createElement(\".graduation.quarter3\", keytimeEl);\n            createElement(\".division_line\", lineAreaEl).style.left = `${100 / maxTime * i}%`;\n        }\n        for (const property in timelineInfo) {\n            const properties = property.split(\"///\");\n            const length = properties.length;\n            const times = timelineInfo[property];\n            const propertyEl = createElement(\".properties\", propertiesScrollAreaEl);\n            const keyframesEl = createElement(\".keyframes\", keyframesScrollAreaEl);\n\n            createElement(\".arrow.unfold\", propertyEl);\n            const spanEl = createElement(\"span\", propertyEl);\n            const keyframesContainerEl = createElement(\".keyframes_container\", keyframesEl);\n            const id = properties[length - 1];\n\n            spanEl.innerHTML = id;\n            propertyEl.style.paddingLeft = `${10 + (length - 1) * 20}px`;\n            propertyEl.setAttribute(\"data-id\", id);\n            propertyEl.setAttribute(\"data-parent\", properties[length - 2] || \"\");\n            propertyEl.setAttribute(\"data-property\", property);\n            propertyEl.setAttribute(\"data-object\", \"0\");\n\n            keyframesEl.setAttribute(\"data-property\", property);\n\n            toArray(propertiesScrollAreaEl.querySelectorAll(`[data-property=\"${properties.slice(0, -1).join(\"///\").replace(/\"/g, \"\\\\\\\"\")}\"]`))\n                .forEach(el => {\n                    el.setAttribute(\"data-object\", \"1\");\n                });\n            propertyEl.setAttribute(\"data-item\", properties[0]);\n            times.forEach(([time, value], i) => {\n                const keyframeEl = createElement(\".keyframe\", keyframesContainerEl);\n                const valueText = toValue(value);\n\n                keyframeEl.setAttribute(\"data-time\", time);\n                keyframeEl.setAttribute(\"data-value\", valueText);\n                keyframeEl.style.left = `${time / maxTime * 100}%`;\n                keyframeEl.innerHTML = `${time} ${valueText}`;\n\n                if (times[i + 1]) {\n                    const [nextTime, nextValue] = times[i + 1];\n                    const nextValueText = toValue(nextValue);\n\n                    if (valueText === nextValueText) {\n                        const keyframeLineEl = createElement(\".keyframe_line\", keyframesContainerEl);\n\n                        keyframeLineEl.style.left = `${time / maxTime * 100}%`;\n                        keyframeLineEl.style.width = `${(nextTime - time) / maxTime * 100}%`;\n                    }\n                }\n            });\n        }\n\n        keyframesScrollAreaEl.appendChild(lineAreaEl);\n        keyframesScrollAreaEl.appendChild(cursorEl);\n\n        this.timelineEl = timelineEl;\n        this.cursorEl = cursorEl;\n        this.cursorHeaderEl = cursorHeaderEl;\n        this.keyframesScrollAreaEl = keyframesScrollAreaEl;\n        this.scrollAreaEl = scrollAreaEl;\n        this.propertiesAreaEl = propertiesAreaEl;\n        this.keyframesHeaderScrollAreaEl = keyframesHeaderScrollAreaEl;\n        this.keyframesAreaEl = keyframesAreaEl;\n        this.keyframesHeaderAreaEl = keyframesHeaderAreaEl;\n\n        this.syncScroll();\n        this.wheelZoom();\n        this.drag();\n        this.fold();\n\n        parentEl && parentEl.appendChild(timelineEl);\n    }\n    private syncScroll() {\n        const { keyframesHeaderAreaEl, keyframesAreaEl } = this;\n        let isScrollKeyframe = false;\n\n        keyframesHeaderAreaEl.addEventListener(\"scroll\", () => {\n            if (isScrollKeyframe) {\n                isScrollKeyframe = false;\n            } else {\n                isScrollKeyframe = true;\n                keyframesAreaEl.scrollLeft = keyframesHeaderAreaEl.scrollLeft;\n            }\n        });\n        keyframesAreaEl.addEventListener(\"scroll\", () => {\n            if (isScrollKeyframe) {\n                isScrollKeyframe = false;\n            } else {\n                isScrollKeyframe = true;\n                keyframesHeaderAreaEl.scrollLeft = keyframesAreaEl.scrollLeft;\n            }\n        });\n    }\n    private wheelZoom() {\n        const { keyframesHeaderScrollAreaEl, keyframesScrollAreaEl } = this;\n        const originalWidth = parseFloat(keyframesHeaderScrollAreaEl.style.width);\n        const axes = new Axes({\n            zoom: {\n                range: [100, Infinity],\n            },\n        }, {}, {\n                zoom: originalWidth,\n            });\n        axes.connect(\"zoom\", new PinchInput(keyframesScrollAreaEl, {\n            scale: 0.7,\n            hammerManagerOptions: {\n                touchAction: \"auto\",\n            },\n        }));\n        axes.on(\"hold\", e => {\n            console.log(\"hold\");\n            if (e.inputEvent) {\n                e.inputEvent.preventDefault();\n            }\n        });\n        axes.on(\"change\", e => {\n            const width = e.pos.zoom;\n\n            keyframesHeaderScrollAreaEl.style.width = `${width}%`;\n            keyframesScrollAreaEl.style.width = `${width}%`;\n\n            if (e.inputEvent) {\n                e.inputEvent.preventDefault();\n            }\n        });\n        keyframesHeaderScrollAreaEl.addEventListener(\"wheel\", e => {\n            const delta = e.deltaY;\n\n            axes.setBy({ zoom: delta / originalWidth * 5 });\n        });\n    }\n    private fold() {\n        const { propertiesAreaEl, keyframesScrollAreaEl } = this;\n\n        function getFoldInfos(target, property) {\n            const infos = [];\n            let nextElementSibling = target.nextElementSibling;\n            while (nextElementSibling) {\n                const nextProperty = nextElementSibling.getAttribute(\"data-property\");\n\n                if (nextProperty.indexOf(property) !== 0) {\n                    break;\n                }\n                infos.push(nextElementSibling);\n                if (nextElementSibling.getAttribute(\"data-object\") === \"1\") {\n                    const nextInfos = getFoldInfos(nextElementSibling, nextProperty);\n\n                    infos.push(nextInfos);\n\n                    let nextInfo = nextInfos;\n                    while (isArray(nextInfo)) {\n                        nextInfo = nextInfos[nextInfos.length - 1];\n                    }\n                    nextElementSibling = nextInfo;\n                }\n                nextElementSibling = nextElementSibling.nextElementSibling;\n            }\n            return infos;\n        }\n        propertiesAreaEl.addEventListener(\"click\", e => {\n            const target = getTarget(e.target as Element, el => hasClass(el, `${PREFIX}properties`));\n\n            if (!target || target.getAttribute(\"data-object\") === \"0\") {\n                return;\n            }\n            const isFold = target.getAttribute(\"data-fold\") === \"1\";\n            const property = target.getAttribute(\"data-property\");\n            const infos = getFoldInfos(target, property);\n\n            target.setAttribute(\"data-fold\", isFold ? \"\" : \"1\");\n            infos.forEach(function forEach(info, i, arr) {\n                if (isArray(info)) {\n                    const prevInfo = arr[i - 1];\n                    const isPrevFold = prevInfo.getAttribute(\"data-fold\") === \"1\";\n\n                    if (!isFold || (isFold && !isPrevFold)) {\n                        info.forEach(forEach);\n                    }\n                } else {\n                    const infoProerpty = info.getAttribute(\"data-property\").replace(/\"/g, \"\\\\\\\"\");\n                    const keyframeEl =\n                        keyframesScrollAreaEl.querySelector(`.${PREFIX}keyframes[data-property=\"${infoProerpty}\"]`);\n                    if (isFold) {\n                        removeClass(keyframeEl, FOLD_CLASS);\n                        removeClass(info, FOLD_CLASS);\n                    } else {\n                        addClass(keyframeEl, FOLD_CLASS);\n                        addClass(info, FOLD_CLASS);\n                    }\n                }\n            });\n        });\n    }\n    private drag() {\n        const {\n            cursorEl,\n            cursorHeaderEl,\n            scrollAreaEl,\n            keyframesAreaEl,\n            keyframesScrollAreaEl,\n            keyframesHeaderScrollAreaEl,\n            scene,\n        } = this;\n\n        scene.on(\"animate\", e => {\n            const time = e.time;\n            const maxDuration = Math.ceil(scene.getDuration());\n            const px = 15 - 30 * time / maxDuration;\n            const percent = 100 * time / maxDuration;\n\n            cursorEl.style.left = `calc(${percent}% + ${px}px)`;\n            cursorHeaderEl.style.left = `calc(${percent}% + ${px}px)`;\n        });\n        function move(clientX: number) {\n            const rect = keyframesScrollAreaEl.getBoundingClientRect();\n            const scrollAreaWidth = rect.width - 30;\n            const scrollAreaX = rect.left + 15;\n            const x = Math.min(scrollAreaWidth, Math.max(clientX - scrollAreaX, 0));\n            const percentage = x / scrollAreaWidth;\n\n            scene.setTime(`${percentage * 100}%`);\n        }\n        function click(e, clientX) {\n            const target = getTarget(e.target as Element, el => hasClass(el, `${PREFIX}keyframe`));\n\n            if (target) {\n                scene.setTime(target.getAttribute(\"data-time\"));\n            } else {\n                move(clientX);\n            }\n            e.preventDefault();\n        }\n        drag(cursorHeaderEl, {\n            dragstart: ({inputEvent}) => {\n                inputEvent.stopPropagation();\n            },\n            drag: ({ clientX }) => {\n                move(clientX);\n            },\n            container: window,\n        });\n        [keyframesScrollAreaEl, keyframesHeaderScrollAreaEl].forEach(el => {\n            drag(el, {\n                container: window,\n                drag: ({ deltaX, deltaY, inputEvent }) => {\n                    keyframesAreaEl.scrollLeft -= deltaX;\n                    scrollAreaEl.scrollTop -= deltaY;\n                    inputEvent.preventDefault();\n                },\n                dragend: ({ isDrag, clientX, inputEvent }) => {\n                    !isDrag && click(inputEvent, clientX);\n                },\n            });\n        });\n\n    }\n}\n"],"names":["PREFIX","FOLD_CLASS","CSS","replace","createElement","selector","parentEl","classNames","match","tag","id","el","document","className","map","name","join","appendChild","keys","value","arr","push","toValue","type","Array","isArray","k","getTimelineInfo","scene","timelineInfo","forEach","item","delay","getDelay","times","time","frame","getFrame","_i","objs","length","lastObj","properties","slice","info","Object","name2","getId","get","getTarget","target","conditionCallback","parentTarget","body","parentNode","isExportCSS","finish","initElement","timelineEl","duration","getDuration","timelineStyleEl","innerHTML","stickyAreaEl","propertiesHeaderAreaEl","keyframesHeaderAreaEl","propertyHeaderEl","keyframesHeaderScrollAreaEl","keyframesHeaderEl","keyframesHeadeerContainerEl","cursorHeaderEl","cursorEl","scrollAreaEl","propertiesAreaEl","propertiesScrollAreaEl","keyframesAreaEl","keyframesScrollAreaEl","lineAreaEl","maxDuration","Math","ceil","maxTime","style","minWidth","width","i","keytimeEl","left","property","split","propertyEl","keyframesEl","spanEl","keyframesContainerEl","paddingLeft","setAttribute","toArray","querySelectorAll","_a","keyframeEl","valueText","_b","nextTime","nextValue","nextValueText","keyframeLineEl","syncScroll","wheelZoom","drag","fold","isScrollKeyframe","addEventListener","scrollLeft","originalWidth","parseFloat","axes","Axes","zoom","range","Infinity","connect","PinchInput","scale","hammerManagerOptions","touchAction","on","e","console","log","inputEvent","preventDefault","pos","delta","deltaY","setBy","getFoldInfos","infos","nextElementSibling","nextProperty","getAttribute","indexOf","nextInfos","nextInfo","hasClass","isFold","prevInfo","isPrevFold","infoProerpty","querySelector","removeClass","addClass","px","percent","move","clientX","rect","getBoundingClientRect","scrollAreaWidth","scrollAreaX","x","min","max","percentage","setTime","click","dragstart","stopPropagation","container","window","deltaX","scrollTop","dragend","isDrag"],"mappings":"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"}