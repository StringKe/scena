{"version":3,"file":"timeline.esm.js","sources":["../src/react-scenejs-timeline/consts.ts","../src/react-scenejs-timeline/utils.ts","../src/react-scenejs-timeline/utils/ElementComponent.tsx","../src/react-scenejs-timeline/HeaderArea/TimeArea.tsx","../src/react-scenejs-timeline/HeaderArea/ControlArea.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/KeyframeCursor.tsx","../src/react-scenejs-timeline/HeaderArea/KeytimesArea.tsx","../src/react-scenejs-timeline/HeaderArea/HeaderArea.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/Keyframe.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/KeyframeGroup.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/KeyframeDelay.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/KeyframeLine.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/Keyframes.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/LineArea.tsx","../src/react-scenejs-timeline/ScrollArea/KeyframesArea/KeyframesArea.tsx","../src/react-scenejs-timeline/ScrollArea/PropertiesArea/Property.tsx","../src/react-scenejs-timeline/ScrollArea/PropertiesArea/PropertiesArea.tsx","../src/react-scenejs-timeline/ScrollArea/ValuesArea/Value.tsx","../src/react-scenejs-timeline/ScrollArea/ValuesArea/ValuesArea.tsx","../src/react-scenejs-timeline/ScrollArea/ScrollArea.tsx","../src/react-scenejs-timeline/dblcheck.ts","../src/react-scenejs-timeline/TimelineInfo.ts","../src/react-scenejs-timeline/Timeline.tsx"],"sourcesContent":["export const PREFIX = `scenejs-editor-`;\nexport const SUPPORT_POINTER_EVENTS = \"PointerEvent\" in window || \"MSPointerEvent\" in window;\nexport const SUPPORT_TOUCH = \"ontouchstart\" in window;\n\nexport const CSS2 = `\n.item-info {\n    position: fixed;\n    right: 0;\n    top: 0;\n    width: 200px;\n    background: #000;\n}\n.options-area {\n\n}\n.option-area {\n    position: relative;\n    border-bottom: 1px solid #777;\n    box-sizing: border-box;\n    white-space: nowrap;\n    background: rgba(90, 90, 90, 0.7);\n    font-size: 13px;\n    font-weight: bold;\n    color: #eee;\n    display: flex;\n}\n.option-name, .option-value {\n    width: 50%;\n    height: 30px;\n    line-height: 20px;\n    box-sizing: border-box;\n    padding: 5px;\n}\n.option-name {\n    border-right: 1px solid #999;\n}\n.option-value input {\n    appearance: none;\n    -webkit-appearance: none;\n    outline: none;\n    position: relative;\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: transparent;\n    color: #4af;\n    font-weight: bold;\n    background: none;\n    border: 0;\n    box-sizing: border-box;\n}\n`.replace(/\\.([^{,\\s\\d.]+)/g, `.${PREFIX}$1`);\n\nexport const CSS = `\n.timeline * {\n    box-sizing: border-box;\n}\n.timeline {\n  position: fixed;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  font-size: 0;\n  background: #000;\n  display: flex;\n  flex-direction: column;\n}\n.header-area, .scroll-area {\n   width: 100%;\n   position: relative;\n  display: flex;\n  -webkit-align-items: flex-start;\n  align-items: flex-start;\n}\n.header-area {\n  position: relative;\n  z-index: 10;\n  top: 0;\n  height: 30px;\n  min-height: 30px;\n}\n.header-area .keyframes {\n  padding: 0px;\n}\n.header-area .properties-area,\n.header-area .keyframes-area,\n.header-area .values-area,\n.header-area .keyframes-scroll-area {\n    height: 100%;\n}\n.header-area .keyframes-scroll-area {\n    overflow: hidden;\n}\n.header-area .property, .header-area .value, .header-area .keyframes {\n  height: 100%;\n}\n.header-area .property {\n    line-height: 30px;\n}\n.value .add {\n    text-align: center;\n    color: #fff;\n    line-height: 30px;\n    font-weight: bold;\n    font-size: 20px;\n    cursor: pointer;\n}\n.header-area .keyframes-area::-webkit-scrollbar {\n    display: none; // Safari and Chrome\n}\n.header-area .keyframe-cursor {\n    position: absolute;\n    border-top: 10px solid #4af;\n    border-left: 6px solid transparent;\n    border-right: 6px solid transparent;\n    width: 0;\n    height: 0;\n    bottom: 0;\n    top: auto;\n    background: none;\n    cursor: pointer;\n}\n.control-area .keyframes {\n    padding-left: 10px;\n}\n.play-control-area {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n}\n.play-control-area .control {\n    position: relative;\n    display: inline-block;\n    vertical-align: middle;\n    color: white;\n    margin: 0px 15px;\n    cursor: pointer;\n}\n.play {\n    border-left: 14px solid white;\n    border-top: 8px solid transparent;\n    border-bottom: 8px solid transparent;\n}\n.pause {\n    border-left: 4px solid #fff;\n    border-right: 4px solid #fff;\n    width: 14px;\n    height: 16px;\n}\n.prev {\n    border-right: 10px solid white;\n    border-top: 6px solid transparent;\n    border-bottom: 6px solid transparent;\n}\n.prev:before {\n    position: absolute;\n    content: \"\";\n    width: 3px;\n    height: 10px;\n    top: 0;\n    right: 100%;\n    transform: translate(0, -50%);\n    background: white;\n}\n.next {\n    border-left: 10px solid white;\n    border-top: 6px solid transparent;\n    border-bottom: 6px solid transparent;\n}\n.next:before {\n    position: absolute;\n    content: \"\";\n    width: 3px;\n    height: 10px;\n    top: 0;\n    transform: translate(0, -50%);\n    background: white;\n}\n.keytime {\n  position: relative;\n  display: inline-block;\n  height: 100%;\n  font-size: 13px;\n  font-weight: bold;\n  color: #777;\n}\n.keytime:last-child {\n  max-width: 0px;\n}\n.keytime span {\n  position: absolute;\n  line-height: 1;\n  bottom: 12px;\n  display: inline-block;\n  transform: translate(-50%);\n  color: #eee;\n}\n.keytime .graduation {\n  position: absolute;\n  bottom: 0;\n  width: 1px;\n  height: 10px;\n  background: #777;\n  transform: translate(-50%);\n}\n.keytime .graduation.half {\n  left: 50%;\n  height: 7px;\n}\n.keytime .graduation.quarter {\n  left: 25%;\n  height: 5px;\n}\n.keytime .graduation.quarter3 {\n  left: 75%;\n  height: 5px;\n}\n.scroll-area {\n  position: relative;\n  width: 100%;\n  height: calc(100% - 60px);\n  overflow: auto;\n}\n.properties-area, .keyframes-area, .values-area {\n  display: inline-block;\n  position: relative;\n  font-size: 16px;\n  overflow: auto;\n}\n\n.properties-area::-webkit-scrollbar, .keyframes-area::-webkit-scrollbar {\n    display: none; // Safari and Chrome\n}\n.properties-area {\n  width: 30%;\n  max-width: 200px;\n  box-sizing: border-box;\n}\n.values-area {\n    width: 50px;\n    min-width: 50px;\n    display: inline-block;\n    border-right: 1px solid #999;\n    box-sizing: border-box;\n}\n.value input {\n    appearance: none;\n    -webkit-appearance: none;\n    outline: none;\n    position: relative;\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: transparent;\n    color: #4af;\n    font-weight: bold;\n    background: none;\n    border: 0;\n    box-sizing: border-box;\n    text-align: center;\n}\n.value {\n\n}\n.alt .value input {\n    cursor: ew-resize;\n}\n.value[data-object=\"1\"] input {\n    display: none;\n}\n.properties-scroll-area {\n  display: inline-block;\n  min-width: 100%;\n}\n.keyframes-area {\n  flex: 1;\n}\n.keyframes-scroll-area {\n  position: relative;\n  min-width: 300px;\n}\n.keyframes, .property, .value {\n  position: relative;\n  height: 30px;\n  line-height: 30px;\n  border-bottom: 1px solid #777;\n  box-sizing: border-box;\n  white-space: nowrap;\n  background: rgba(90, 90, 90, 0.7);\n  z-index: 1;\n}\n\n.property {\n  padding-left: 10px;\n  box-sizing: border-box;\n  font-size: 13px;\n  font-weight: bold;\n  color: #eee;\n}\n.property .remove {\n    position: absolute;\n    display: inline-block;\n    cursor: pointer;\n    width: 18px;\n    height: 18px;\n    top: 0;\n    bottom: 0;\n    right: 10px;\n    margin: auto;\n    border-radius: 50%;\n    border: 2px solid #fff;\n    vertical-align: middle;\n    display: none;\n    margin-left: 10px;\n    box-sizing: border-box;\n}\n.property .remove:before, .property .remove:after {\n    position: absolute;\n    content: \"\";\n    width: 8px;\n    height: 2px;\n    border-radius: 1px;\n    background: #fff;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    margin: auto;\n}\n.property .remove:before {\n    transform: rotate(45deg);\n}\n.property .remove:after {\n    transform: rotate(-45deg);\n}\n.property:hover .remove {\n    display: inline-block;\n}\n\n[data-item=\"1\"], [data-item=\"1\"] .add {\n    height: 30px;\n    line-height: 30px;\n}\n.time-area {\n    position: absolute;\n    top: 0;\n    left: 10px;\n    font-size: 13px;\n    color: #4af;\n    line-height: 30px;\n    font-weight: bold;\n    height: 100%;\n    line-height: 30px;\n    border: 0;\n    background: transparent;\n    outline: 0;\n}\n.time-area:after {\n    content: \"s\";\n}\n.property .arrow {\n    position: relative;\n    display: inline-block;\n    width: 20px;\n    height: 25px;\n    cursor: pointer;\n    vertical-align: middle;\n}\n.property .arrow:after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    right: 0;\n    left: 0;\n    bottom: 0;\n    margin: auto;\n    width: 0;\n    height: 0;\n    border-top: 6px solid #eee;\n    border-left: 4px solid transparent;\n    border-right: 4px solid transparent;\n}\n.property[data-fold=\"1\"] .arrow:after {\n    border-top: 4px solid transparent;\n    border-bottom: 4px solid transparent;\n    border-right: 0;\n    border-left: 6px solid #eee;\n}\n.property[data-object=\"0\"] .arrow {\n    display: none;\n}\n.property.fold, .keyframes.fold, .value.fold {\n    display: none;\n}\n.property.select, .value.select, .keyframes.select {\n    background: rgba(120, 120, 120, 0.7);\n}\n.keyframes {\n\n}\n.keyframe-delay {\n  position: absolute;\n  top: 3px;\n  bottom: 3px;\n  left: 0;\n  background: #4af;\n  opacity: 0.2;\n  z-index: 0;\n}\n.keyframe-group {\n    position: absolute;\n    top: 3px;\n    bottom: 3px;\n    left: 0;\n    background: #4af;\n    opacity: 0.6;\n    border: 1px solid rgba(0, 0, 0, 0.2);\n    border-left-color: rgba(255, 255, 255, 0.2);\n    border-top-color: rgba(255, 255, 255, 0.2);\n    z-index: 0;\n}\n.keyframe-line {\n  position: absolute;\n  height: 8px;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  background: #666;\n  z-index: 0;\n}\n.keyframe {\n  position: absolute;\n  font-size: 0px;\n  width: 12px;\n  height: 12px;\n  top: 0px;\n  bottom: 0px;\n  margin: auto;\n  background: #fff;\n  border: 2px solid #383838;\n  border-radius: 2px;\n  box-sizing: border-box;\n  transform: translate(-50%) rotate(45deg);\n  z-index: 1;\n  cursor: pointer;\n}\n.keyframe[data-no=\"1\"] {\n    opacity: 0.2;\n}\n.select .keyframe {\n    border-color: #555;\n}\n.keyframe.select {\n    background: #4af;\n}\n.keyframes-container, .line-area {\n  position: relative;\n  width: calc(100% - 30px);\n  left: 15px;\n  height: 100%;\n}\n.line-area {\n  position: absolute;\n  top: 0;\n  z-index: 0;\n}\n.keyframe-cursor {\n  position: absolute;\n  top: 0;\n  z-index: 1;\n  background: #4af;\n  width: 1px;\n  height: 100%;\n  left: 15px;\n  transform: translate(-50%);\n}\n.scroll-aare .keyframe-cursor {\n  pointer-events: none;\n}\n.division-line {\n  position: absolute;\n  background: #333;\n  width: 1px;\n  height: 100%;\n  transform: translate(-50%);\n}\n`.replace(/\\.([^{,\\s\\d.]+)/g, `.${PREFIX}$1`);\n\nexport const DURATION = \"duration\";\nexport const FILL_MODE = \"fillMode\";\nexport const DIRECTION = \"direction\";\nexport const ITERATION_COUNT = \"iterationCount\";\nexport const DELAY = \"delay\";\nexport const EASING = \"easing\";\nexport const PLAY_SPEED = \"playSpeed\";\nexport const EASING_NAME = \"easingName\";\nexport const ITERATION_TIME = \"iterationTime\";\nexport const PAUSED = \"paused\";\nexport const ENDED = \"ended\";\nexport const TIMEUPDATE = \"timeupdate\";\nexport const ANIMATE = \"animate\";\nexport const PLAY = \"play\";\nexport const RUNNING = \"running\";\nexport const ITERATION = \"iteration\";\nexport const START_ANIMATION = \"startAnimation\";\nexport const PAUSE_ANIMATION = \"pauseAnimation\";\nexport const ALTERNATE = \"alternate\";\nexport const REVERSE = \"reverse\";\nexport const ALTERNATE_REVERSE = \"alternate-reverse\";\nexport const NORMAL = \"normal\";\nexport const INFINITE = \"infinite\";\nexport const PLAY_STATE = \"playState\";\nexport const PLAY_CSS = \"playCSS\";\nexport const PREV_TIME = \"prevTime\";\nexport const TICK_TIME = \"tickTime\";\nexport const CURRENT_TIME = \"currentTime\";\nexport const SELECTOR = \"selector\";\nexport const TRANSFORM_NAME = \"transform\";\n","import { PREFIX } from \"./consts\";\nimport Scene, { SceneItem, Frame } from \"scenejs\";\nimport {\n    hasClass as hasClass2,\n    addClass as addClass2,\n    removeClass as removeClass2,\n    IObject,\n    isObject,\n    findIndex,\n} from \"@daybrush/utils\";\nimport ElementComponent from \"./utils/ElementComponent\";\n\nexport function numberFormat(num: number, count: number, isRight?: boolean) {\n    const length = `${num}`.length;\n    const arr = [];\n\n    if (isRight) {\n        arr.push(num);\n    }\n    for (let i = length; i < count; ++i) {\n        arr.push(0);\n    }\n    if (!isRight) {\n        arr.push(num);\n    }\n    return arr.join(\"\");\n}\nexport function applyStyle(el: HTMLElement, style: IObject<any>) {\n    for (const name in style) {\n        el.style[name as any] = style[name as any];\n    }\n}\nexport function keys(value: object) {\n    const arr = [];\n    for (const name in value) {\n        arr.push(name);\n    }\n    return arr;\n}\nexport function toValue(value: any): any {\n    if (isObject(value)) {\n        if (Array.isArray(value)) {\n            return `[${value.join(\", \")}]`;\n        }\n        return `{${keys(value).map(k => `${k}: ${toValue(value[k])}`).join(\", \")}}`;\n    }\n    return value;\n}\nexport function flatObject(obj: IObject<any>, newObj: IObject<any> = {}) {\n\n    for (const name in obj) {\n        const value = obj[name];\n\n        if (isObject(value)) {\n            const nextObj = flatObject(isFrame(value) ? value.get() : value);\n\n            for (const nextName in nextObj) {\n                newObj[`${name}///${nextName}`] = nextObj[nextName];\n            }\n        } else {\n            newObj[name] = value;\n        }\n    }\n    return newObj;\n}\n\nexport function getTarget<T extends HTMLElement>(target: T, conditionCallback: (el: Element) => boolean): T | null {\n    let parentTarget = target;\n\n    while (parentTarget && parentTarget !== document.body) {\n        if (conditionCallback(parentTarget)) {\n            return parentTarget;\n        }\n        parentTarget = parentTarget.parentNode as T;\n    }\n    return null;\n}\n\nexport function hasClass(target: Element, className: string) {\n    return hasClass2(target, `${PREFIX}${className}`);\n}\nexport function addClass(target: Element, className: string) {\n    return addClass2(target, `${PREFIX}${className}`);\n}\nexport function removeClass(target: Element, className: string) {\n    return removeClass2(target, `${PREFIX}${className}`);\n}\nexport function isScene(value: any): value is Scene {\n    return !!(value.constructor as typeof Scene).prototype.getItem;\n}\nexport function isSceneItem(value: any): value is SceneItem {\n    return !!(value.constructor as typeof SceneItem).prototype.getFrame;\n}\nexport function isFrame(value: any): value is Frame {\n    return !!(value.constructor as typeof Frame).prototype.toCSS;\n}\nexport function splitProperty(scene: Scene, property: string) {\n    const names = property.split(\"///\");\n    const length = names.length;\n    let item: Scene | SceneItem = scene;\n    let i;\n\n    for (i = 0; i < length; ++i) {\n        if (isSceneItem(item)) {\n            break;\n        }\n        item = scene.getItem(names[i]);\n    }\n    return {\n        item: item as SceneItem,\n        names: names.slice(0, i),\n        properties: names.slice(i),\n    };\n}\nexport function getSceneItem(scene: Scene, names: string[]): SceneItem {\n    return names.reduce<any>(\n        (nextScene, name) => nextScene.getItem(name),\n        scene,\n    );\n}\n\nexport function findElementIndexByPosition(elements: HTMLElement[], pos: number): number {\n    return findIndex(elements, el => {\n        const box = el.getBoundingClientRect();\n        const top = box.top;\n        const bottom = top + box.height;\n\n        return top <= pos && pos < bottom;\n    });\n}\n\nexport function prefix(className: string) {\n    return className.split(\" \").map(name => `${PREFIX}${name}`).join(\" \");\n}\nexport function ref(target: any, name: string) {\n    return (e: any) => {\n        e && (target[name] = e);\n    };\n}\nexport function refs(target: any, name: string, i: number) {\n    return (e: any) => {\n        e && (target[name][i] = e);\n    };\n}\n\nexport function checkFolded(foldedInfo: IObject<any>, names: any[]) {\n    const index = findIndex(names, (name, i) => foldedInfo[names.slice(0, i + 1).join(\"///\") + \"///\"]);\n\n    if (index > -1) {\n        if (index === names.length - 1) {\n            return 2;\n        }\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nexport function fold(\n    target: ElementComponent<any, { foldedInfo: IObject<boolean> }>,\n    foldedProperty: string,\n    isNotUpdate?: boolean,\n) {\n    const id = foldedProperty + \"///\";\n    const foldedInfo = target.state.foldedInfo;\n\n    foldedInfo[id] = !foldedInfo[id];\n    // console.log(foldedInfo);\n    if (!isNotUpdate) {\n        target.setState({\n            foldedInfo: { ...foldedInfo },\n        });\n    }\n}\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nexport default class ElementComponent<T = {}, U = {}, C extends HTMLElement = HTMLElement>\n    extends React.PureComponent<T, U> {\n    private element!: C;\n    public getElement() {\n        return this.element || (this.element = ReactDOM.findDOMNode(this) as C);\n    }\n}\n","import * as React from \"react\";\nimport { prefix } from \"../utils\";\nimport ElementComponent from \"../utils/ElementComponent\";\nimport KeyController from \"keycon\";\n\nexport default class TimeArea extends ElementComponent<{\n    setTime: (time: number) => any,\n}, {}, HTMLInputElement> {\n    public render() {\n        return (\n            <input className={prefix(\"time-area\")}/>\n        );\n    }\n    public componentDidMount() {\n        new KeyController(this.getElement())\n        .keydown(e => {\n            !e.isToggle && e.inputEvent.stopPropagation();\n        })\n        .keyup(e => {\n            !e.isToggle && e.inputEvent.stopPropagation();\n        })\n        .keyup(\"enter\", e => {\n            // go to time\n            const value = (this.getElement() as HTMLInputElement).value;\n            const result = /(\\d+):(\\d+):(\\d+)/g.exec(value);\n\n            if (!result) {\n                return;\n            }\n            const minute = parseFloat(result[1]);\n            const second = parseFloat(result[2]);\n            const milisecond = parseFloat(`0.${result[3]}`);\n            const time = minute * 60 + second + milisecond;\n\n            this.props.setTime(time);\n        });\n    }\n}\n","import * as React from \"react\";\nimport { prefix, ref } from \"../utils\";\nimport ElementComponent from \"../utils/ElementComponent\";\nimport TimeArea from \"./TimeArea\";\nimport Scene, { SceneItem } from \"scenejs\";\n\nexport default class ControlArea extends ElementComponent<{\n    scene?: Scene | SceneItem,\n    select: (property: string, time: number) => any,\n    setTime: (time: number) => any,\n    prev: () => any,\n    next: () => any,\n    togglePlay: () => any,\n}, {\n    isPlay: boolean,\n}> {\n    public timeArea!: TimeArea;\n    public state = {\n        isPlay: false,\n    };\n    public render() {\n        return (\n            <div className={prefix(\"control-area header-area\")}>\n                <div className={prefix(\"properties-area\")} onClick={this.unselect}>\n                    <div className={prefix(\"property\")} />\n                </div>\n                <div className={prefix(\"values-area\")}>\n                    <div className={prefix(\"value\")}></div>\n                </div>\n                <div className={prefix(\"keyframes-area\")}>\n                    <div className={prefix(\"keyframes\")}>\n                        <TimeArea ref={ref(this, \"timeArea\")} setTime={this.props.setTime} />\n                        <div className={prefix(\"play-control-area\")}>\n                            <div className={prefix(\"control prev\")} onClick={this.props.prev} />\n                            <div\n                                className={prefix(\"control \" + (this.state.isPlay ? \"pause\" : \"play\"))}\n                                onClick={this.props.togglePlay} />\n                            <div className={prefix(\"control next\")} onClick={this.props.next} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n    public componentDidMount() {\n       this.initScene(this.props.scene);\n    }\n    public componentDidUpdate(prevProps: ControlArea[\"props\"]) {\n        if (prevProps.scene !== this.props.scene) {\n            this.initScene(this.props.scene);\n            this.releaseScene(prevProps.scene);\n        }\n    }\n    public componentWillUnmount() {\n        this.releaseScene(this.props.scene);\n    }\n    private initScene(scene?: Scene | SceneItem) {\n        if (!scene) {\n            return;\n        }\n        scene.on({\n            play: this.play,\n            paused: this.pause,\n        });\n    }\n    private releaseScene(scene?: Scene | SceneItem) {\n        if (!scene) {\n            return;\n        }\n        scene.off(\"play\", this.play);\n        scene.off(\"paused\", this.pause);\n    }\n    private play = () => {\n        this.setState({ isPlay: true });\n    }\n    private pause = () => {\n        this.setState({ isPlay: false });\n    }\n    private unselect = () => {\n        this.props.select(\"\", -1);\n    }\n}\n","import * as React from \"react\";\nimport ElementComponent from \"../../utils/ElementComponent\";\nimport { ref, prefix } from \"../../utils\";\n\nexport default class KeyframeCursor extends ElementComponent {\n    public render() {\n        return <div\n            className={prefix(\"keyframe-cursor\")}\n            ref={ref(this, \"cursor\")} />;\n    }\n}\n","import { TimelineInfo } from \"../types\";\nimport * as React from \"react\";\nimport { prefix, ref } from \"../utils\";\nimport ElementComponent from \"../utils/ElementComponent\";\nimport KeyframeCursor from \"../ScrollArea/KeyframesArea/KeyframeCursor\";\nimport { addEvent } from \"@daybrush/utils\";\nimport Axes from \"@egjs/axes\";\nimport { drag } from \"@daybrush/drag\";\n\nexport default class KeytimesArea extends ElementComponent<{\n    timelineInfo: TimelineInfo,\n    maxTime: number,\n    maxDuration: number,\n    zoom: number,\n    axes: Axes,\n    move: (clientX: number) => void,\n}> {\n    public scrollAreaElement!: HTMLElement;\n    public cursor!: KeyframeCursor;\n\n    public renderKeytimes() {\n        const { maxTime } = this.props;\n        const keytimes = [];\n\n        for (let time = 0; time <= maxTime; ++time) {\n            keytimes.push(\n                <div key={time} data-time={time} className={prefix(\"keytime\")} style={{ width: `${100 / maxTime}%` }}>\n                    <span>{time}</span>\n                    <div className={prefix(\"graduation start\")} />\n                    <div className={prefix(\"graduation quarter\")} />\n                    <div className={prefix(\"graduation half\")} />\n                    <div className={prefix(\"graduation quarter3\")} />\n                </div>,\n            );\n        }\n        return keytimes;\n    }\n    public render() {\n        const { maxTime, maxDuration, zoom } = this.props;\n        return (\n            <div className={prefix(\"keytimes-area keyframes-area\")}>\n                <div\n                    className={prefix(\"keyframes-scroll-area\")}\n                    ref={ref(this, \"scrollAreaElement\")}\n                    style={{\n                        minWidth: `${50 * maxTime}px`,\n                        width: `${Math.min(maxDuration ? maxTime / maxDuration : 1, 2) * zoom * 100}%`,\n                    }}\n                >\n                    <div className={prefix(\"keytimes keyframes\")}>\n                        <div className={prefix(\"keyframes-container\")}>\n                            {this.renderKeytimes()}\n                        </div>\n                        <KeyframeCursor ref={ref(this, \"cursor\")}/>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n    public componentDidMount() {\n        addEvent(this.getElement(), \"wheel\", e => {\n            const delta = e.deltaY;\n\n            this.props.axes.setBy({ zoom: delta / 5000 });\n            !e.deltaX && e.preventDefault();\n        });\n        drag(this.cursor!.getElement(), {\n            dragstart: ({ inputEvent }) => {\n                inputEvent.stopPropagation();\n            },\n            drag: ({ clientX }) => {\n                this.props.move(clientX);\n            },\n            container: window,\n        });\n    }\n}\n","import { TimelineInfo } from \"../types\";\nimport ElementComponent from \"../utils/ElementComponent\";\nimport KeytimesArea from \"./KeytimesArea\";\nimport * as React from \"react\";\nimport { prefix, ref } from \"../utils\";\nimport Axes from \"@egjs/axes\";\nimport Scene, { SceneItem } from \"scenejs\";\n\nexport default class HeaderArea extends ElementComponent<{\n    timelineInfo: TimelineInfo,\n    maxTime: number,\n    maxDuration: number,\n    zoom: number,\n    axes: Axes,\n    scene?: Scene | SceneItem,\n    add: (item?: Scene | SceneItem, properties?: string[]) => any,\n    move: (clientX: number) => void,\n}> {\n    public keytimesArea!: KeytimesArea;\n    public render() {\n        const { axes, timelineInfo, maxTime, maxDuration, zoom, move } = this.props;\n        return (\n            <div className={prefix(\"header-area\")}>\n                <div className={prefix(\"properties-area\")}>\n                    <div className={prefix(\"property\")}>Name</div>\n                </div>\n                <div className={prefix(\"values-area\")}>\n                    <div className={prefix(\"value\")} >\n                        <div className={prefix(\"add\")} onClick={this.add}>+</div>\n                    </div>\n                </div>\n                <KeytimesArea\n                    ref={ref(this, \"keytimesArea\")}\n                    move={move}\n                    axes={axes}\n                    timelineInfo={timelineInfo}\n                    maxDuration={maxDuration}\n                    maxTime={maxTime}\n                    zoom={zoom} />\n            </div>\n        );\n    }\n    private add = () => {\n        if (this.props.scene) {\n            return;\n        }\n        this.props.add();\n    }\n}\n","import * as React from \"react\";\nimport { prefix } from \"../../utils\";\nimport ElementComponent from \"../../utils/ElementComponent\";\n\nexport default class Keyframe extends ElementComponent<{\n    id: string,\n    time: number,\n    maxTime: number,\n    iterationTime: number,\n    value: string | undefined,\n    selected: boolean,\n}> {\n    public render() {\n        const { time, value, maxTime, selected } = this.props;\n        return (\n            <div className={prefix(\"keyframe\" + (selected ? \" select\" : \"\"))}\n                data-time={time} style={{ left: `${time / maxTime * 100}%` }}>\n                {time} {value}\n            </div>\n        );\n    }\n}\n","import * as React from \"react\";\nimport { prefix } from \"../../utils\";\n\nexport default class KeyframeGroup extends React.Component<{\n    id: string,\n    time: number,\n    nextTime: number,\n    maxTime: number,\n    selected: boolean,\n}> {\n    public render() {\n        const { time, nextTime, maxTime, selected } = this.props;\n        return (\n            <div\n                className={prefix(\"keyframe-group\" + (selected ? \" select\" : \"\"))}\n                data-time={time}\n                style={{ left: `${time / maxTime * 100}%`, width: `${(nextTime - time) / maxTime * 100}%` }} />\n        );\n    }\n}\n","import * as React from \"react\";\nimport { prefix } from \"../../utils\";\n\nexport default class KeyframeDelay extends React.Component<{\n    id: string,\n    time: number,\n    nextTime: number,\n    maxTime: number,\n}> {\n    public render() {\n        const { time, nextTime, maxTime } = this.props;\n        return (\n            <div\n                className={prefix(\"keyframe-delay\")}\n                style={{ left: `${time / maxTime * 100}%`, width: `${(nextTime - time) / maxTime * 100}%` }} />\n        );\n    }\n}\n","import * as React from \"react\";\nimport { prefix } from \"../../utils\";\n\nexport default class KeyframeLine extends React.Component<{\n    id: string,\n    time: number,\n    nextTime: number,\n    maxTime: number,\n}> {\n    public render() {\n        const { time, nextTime, maxTime } = this.props;\n\n        return (\n            <div\n                className={prefix(\"keyframe-line\")}\n                style={{ left: `${time / maxTime * 100}%`, width: `${(nextTime - time) / maxTime * 100}%` }} />\n        );\n    }\n}\n","import { PropertiesInfo } from \"../../types\";\nimport { isScene, toValue, prefix } from \"../../utils\";\nimport Keyframe from \"./Keyframe\";\nimport KeyframeGroup from \"./KeyframeGroup\";\nimport KeyframeDelay from \"./KeyframeDelay\";\nimport KeyframeLine from \"./KeyframeLine\";\nimport { isUndefined, findIndex } from \"@daybrush/utils\";\nimport * as React from \"react\";\nimport ElementComponent from \"../../utils/ElementComponent\";\n\nexport default class Keyframes extends ElementComponent<{\n    id: string,\n    propertiesInfo: PropertiesInfo,\n    maxTime: number,\n    folded: number,\n    selected: boolean,\n    selectedTime: number,\n}> {\n    public render() {\n        const { id, propertiesInfo, selected, folded } = this.props;\n        return (\n            <div\n                className={prefix(\"keyframes\" + (folded === 1 ? \" fold\" : \"\") + (selected ? \" select\" : \"\"))}\n                data-item={propertiesInfo.isItem ? \"1\" : \"0\"}\n                data-id={id}>\n                <div className={prefix(\"keyframes-container\")}>\n                    {this.renderList()}\n                </div>\n            </div>\n        );\n    }\n    public renderList() {\n        const { propertiesInfo, maxTime, selected, selectedTime } = this.props;\n        const { item, frames, properties } = propertiesInfo;\n        const isItScene = isScene(item);\n        const duration = item.getDuration();\n\n        const keyframes: JSX.Element[] = [];\n        const keyframeGroups: JSX.Element[] = [];\n        const keyframeDelays: JSX.Element[] = [];\n        const keyframeLines: JSX.Element[] = [];\n\n        const length = frames.length;\n        const hasProperties = properties.length;\n        let startIndex = 0;\n\n        if (length >= 2 && !hasProperties) {\n            const index = findIndex(frames, ([, , value]) => !isUndefined(value));\n            startIndex = Math.min(length - 2, Math.max(frames[0][1] === 0 && frames[1][1] === 0 ? 1 : 0, index));\n            const startFrame = frames[startIndex];\n            const endFrame = frames[length - 1];\n            const time = startFrame[0];\n            const nextTime = endFrame[0];\n\n            keyframeGroups.push(\n                <KeyframeGroup\n                    key=\"group\"\n                    id={`${time},${nextTime}`}\n                    selected={selected && time <= selectedTime && selectedTime <= nextTime}\n                    time={time}\n                    nextTime={nextTime}\n                    maxTime={maxTime} />,\n            );\n        }\n        frames.forEach(([time, iterationTime, value], i) => {\n            const valueText = toValue(value);\n            if (frames[i + 1]) {\n                const [nextTime, nextIterationTime] = frames[i + 1];\n\n                if (\n                    (iterationTime === 0 && nextIterationTime === 0)\n                    || (iterationTime === duration && nextIterationTime === duration)\n                ) {\n                    keyframeDelays.push(\n                        <KeyframeDelay\n                            key={`delay${time},${nextTime}`}\n                            id=\"-1\"\n                            time={time}\n                            nextTime={nextTime}\n                            maxTime={maxTime} />,\n                    );\n                }\n            }\n            if (\n                i === 0\n                && time === 0\n                && iterationTime === 0\n                && isUndefined(value)\n                && !hasProperties\n            ) {\n                return;\n            }\n            if (frames[i + 1]) {\n                const [nextTime, , nextValue] = frames[i + 1];\n                const nextValueText = toValue(nextValue);\n\n                if (\n                    !isItScene\n                    && !isUndefined(value)\n                    && !isUndefined(nextValue)\n                    && valueText !== nextValueText\n                    && hasProperties\n                ) {\n                    keyframeLines.push(\n                        <KeyframeLine\n                            key={`line${keyframeLines.length}`}\n                            time={time}\n                            id={`${time},${nextTime}`}\n                            nextTime={nextTime}\n                            maxTime={maxTime} />,\n                    );\n                }\n            }\n\n            if (isItScene || i < startIndex) {\n                return;\n            }\n            keyframes.push(\n                <Keyframe\n                    key={`keyframe${i}`}\n                    id={`${time}`}\n                    selected={selected && time === selectedTime}\n                    time={time}\n                    iterationTime={iterationTime}\n                    value={valueText}\n                    maxTime={maxTime}\n                />,\n            );\n        });\n\n        return [...keyframeGroups, ...keyframes, ...keyframeDelays, ...keyframeLines];\n    }\n}\n","import * as React from \"react\";\nimport { prefix } from \"../../utils\";\n\nexport default ({\n    maxTime,\n}: {\n    maxTime: number,\n}) => {\n    const lines = [];\n    for (let time = 0; time <= maxTime; ++time) {\n        lines.push(\n            <div className={prefix(\"division-line\")} key={time} style={{ left: `${100 / maxTime * time}%` }}></div>,\n        );\n    }\n    return (<div className={prefix(\"line-area\")}>{lines}</div>);\n};\n","import { TimelineInfo } from \"../../types\";\nimport Keyframes from \"./Keyframes\";\nimport LineArea from \"./LineArea\";\nimport * as React from \"react\";\nimport { prefix, ref, refs, checkFolded } from \"../../utils\";\nimport ElementComponent from \"../../utils/ElementComponent\";\nimport Axes from \"@egjs/axes\";\nimport KeyController from \"keycon\";\nimport { addEvent, IObject } from \"@daybrush/utils\";\nimport KeyframeCursor from \"./KeyframeCursor\";\n\nexport default class KeyframesArea extends ElementComponent<{\n    timelineInfo: TimelineInfo,\n    maxTime: number,\n    maxDuration: number,\n    zoom: number,\n    axes: Axes,\n    keycon: KeyController,\n    selectedProperty: string,\n    selectedTime: number,\n}, {\n    foldedInfo: IObject<boolean>,\n}> {\n    public cursor!: KeyframeCursor;\n    public scrollAreaElement!: HTMLElement;\n    public keyframesList: Keyframes[] = [];\n    public state = {\n        foldedInfo: {},\n    };\n    public render() {\n        const {\n            timelineInfo, maxTime, maxDuration, zoom,\n            selectedProperty, selectedTime,\n        } = this.props;\n        const { foldedInfo } = this.state;\n        const width = Math.min(maxDuration ? maxTime / maxDuration : 1, 2);\n        const keyframesList: JSX.Element[] = [];\n\n        this.keyframesList = [];\n        for (const key in timelineInfo) {\n            const propertiesInfo = timelineInfo[key];\n            const selected = key === selectedProperty;\n            const folded = checkFolded(foldedInfo, propertiesInfo.keys);\n\n            keyframesList.push(\n                <Keyframes\n                    ref={refs(this, \"keyframesList\", keyframesList.length)}\n                    selected={selected}\n                    folded={folded}\n                    selectedTime={selectedTime}\n                    key={key}\n                    id={key}\n                    propertiesInfo={propertiesInfo}\n                    maxTime={maxTime} />,\n            );\n        }\n        return (\n            <div className={prefix(\"keyframes-area\")}>\n                <div\n                    className={prefix(\"keyframes-scroll-area\")}\n                    ref={ref(this, \"scrollAreaElement\")}\n                    style={{\n                        minWidth: `${50 * maxTime}px`,\n                        width: `${width * zoom * 100}%`,\n                    }}>\n                    {[\n                        ...keyframesList,\n                        <KeyframeCursor key=\"cursor\" ref={ref(this, \"cursor\")} />,\n                        <LineArea maxTime={maxTime} key=\"lines\" />,\n                    ]}\n                </div>\n            </div>\n        );\n    }\n    public componentDidMount() {\n        addEvent(this.getElement(), \"wheel\", e => {\n            if (!this.props.keycon.altKey) {\n                return;\n            }\n            e.preventDefault();\n            const delta = e.deltaY;\n\n            this.props.axes.setBy({ zoom: delta / 5000 });\n        });\n    }\n}\n","import { PropertiesInfo } from \"../../types\";\nimport * as React from \"react\";\nimport { prefix } from \"../../utils\";\nimport ElementComponent from \"../../utils/ElementComponent\";\n\nexport default class Property extends ElementComponent<{\n    id: string,\n    propertiesInfo: PropertiesInfo,\n    selected: boolean,\n    folded: number,\n}> {\n    public render() {\n        const {\n            id,\n            selected,\n            folded,\n            propertiesInfo: {\n                keys: propertyNames,\n                isItem,\n                isParent,\n            },\n        } = this.props;\n        const length = propertyNames.length;\n        const name = propertyNames[length - 1] as string;\n\n        return (\n            <div className={prefix(\"property\" + (folded === 1 ? \" fold\" : \"\") + (selected ? \" select\" : \"\"))}\n                data-id={id}\n                data-name={name}\n                data-object={isParent ? 1 : 0}\n                data-item={isItem ? 1 : 0}\n                data-fold={folded === 2 ? 1 : 0}\n                style={{\n                    paddingLeft: `${10 + (length - 1) * 20}px`,\n                }}>\n                <div className={prefix(\"arrow\")}></div>\n                <span>{name}</span>\n                <div className={prefix(\"remove\")}></div>\n            </div>\n        );\n    }\n}\n","import { TimelineInfo } from \"../../types\";\nimport Property from \"./Property\";\nimport * as React from \"react\";\nimport { prefix, refs, checkFolded } from \"../../utils\";\nimport ElementComponent from \"../../utils/ElementComponent\";\nimport { IObject } from \"@daybrush/utils\";\n\nexport default class PropertiesArea extends ElementComponent<{\n    timelineInfo: TimelineInfo,\n    selectedProperty: string,\n}, {\n    foldedInfo: IObject<boolean>,\n}> {\n    public properties: Property[] = [];\n    public state = {\n        foldedInfo: {},\n    };\n    public render() {\n        const { timelineInfo, selectedProperty } = this.props;\n        const { foldedInfo } = this.state;\n        const properties: JSX.Element[] = [];\n\n        this.properties = [];\n        for (const id in timelineInfo) {\n            const propertiesInfo = timelineInfo[id];\n            const selected = selectedProperty === id;\n            const folded = checkFolded(foldedInfo, propertiesInfo.keys);\n\n            properties.push(\n                <Property\n                    ref={refs(this, \"properties\", properties.length)}\n                    selected={selected}\n                    folded={folded}\n                    key={id}\n                    id={id} propertiesInfo={propertiesInfo} />,\n            );\n        }\n\n        return (\n            <div className={prefix(\"properties-area\")}>\n                <div className={prefix(\"properties-scroll-area\")}>\n                    {properties}\n                </div>\n            </div>\n        );\n    }\n}\n","import { PropertiesInfo } from \"../../types\";\nimport * as React from \"react\";\nimport { prefix, ref } from \"../../utils\";\nimport Scene, { SceneItem } from \"scenejs\";\nimport ElementComponent from \"../../utils/ElementComponent\";\n\nexport default class Value extends ElementComponent<{\n    id: string,\n    propertiesInfo: PropertiesInfo,\n    folded: number,\n    selected: boolean,\n    add: (item: Scene | SceneItem, properties: string[]) => any,\n}> {\n    public inputElement!: HTMLInputElement;\n    public render() {\n        const {\n            id,\n            selected,\n            folded,\n            propertiesInfo: {\n                isItem,\n                isParent,\n            },\n        } = this.props;\n        return (\n            <div className={prefix(\"value\" + (folded === 1 ? \" fold\" : \"\") + (selected ? \" select\" : \"\"))}\n                data-id={id}\n                data-object={isParent ? 1 : 0}\n                data-item={isItem ? 1 : 0}>\n                {this.renderValue()}\n            </div>\n        );\n    }\n    public renderValue() {\n        const { isParent } = this.props.propertiesInfo;\n        if (isParent) {\n            return (\n                <div className={prefix(\"add\")} onClick={this.add}>+</div>\n            );\n        } else {\n            return (\n                <input ref={ref(this, \"inputElement\")}></input>\n            );\n        }\n    }\n    private add = () => {\n        const {\n            add,\n            propertiesInfo: {\n                item,\n                properties,\n            },\n        } = this.props;\n        add(item, properties);\n    }\n}\n","import { TimelineInfo } from \"../../types\";\nimport Value from \"./Value\";\nimport * as React from \"react\";\nimport { prefix, refs, checkFolded, getTarget, hasClass } from \"../../utils\";\nimport ElementComponent from \"../../utils/ElementComponent\";\nimport { IObject, findIndex } from \"@daybrush/utils\";\nimport Scene, { SceneItem } from \"scenejs\";\nimport { drag } from \"@daybrush/drag\";\nimport KeyController from \"keycon\";\n\nexport default class ValuesArea extends ElementComponent<{\n    timelineInfo: TimelineInfo,\n    keycon: KeyController,\n    selectedProperty: string,\n    add: (item: Scene | SceneItem, properties: string[]) => any,\n    setTime: (time?: number) => any,\n    editKeyframe: (index: number, value: any) => any,\n}, {\n    foldedInfo: IObject<boolean>,\n}> {\n    public values: Value[] = [];\n    public state = {\n        foldedInfo: {},\n    };\n    public render() {\n        const { timelineInfo, selectedProperty, add } = this.props;\n        const { foldedInfo } = this.state;\n        const values: JSX.Element[] = [];\n        this.values = [];\n\n        for (const id in timelineInfo) {\n            const propertiesInfo = timelineInfo[id];\n            const selected = selectedProperty === id;\n            const folded = checkFolded(foldedInfo, propertiesInfo.keys);\n\n            values.push(<Value\n                ref={refs(this, \"values\", values.length)}\n                add={add}\n                key={id}\n                folded={folded}\n                selected={selected}\n                id={id} propertiesInfo={propertiesInfo} />);\n        }\n\n        return (\n            <div className={prefix(\"values-area\")}>\n                {values}\n            </div>\n        );\n    }\n    public componentDidMount() {\n        const element = this.getElement();\n        let dragTarget: HTMLInputElement;\n        let dragTargetValue: any;\n\n        element.addEventListener(\"focusout\", e => {\n            this.props.setTime();\n        });\n        drag(element, {\n            container: window,\n            dragstart: e => {\n                dragTarget = e.inputEvent.target;\n                dragTargetValue = dragTarget.value;\n\n                if (!this.props.keycon.altKey || !getTarget(dragTarget, el => el.nodeName === \"INPUT\")) {\n                    return false;\n                }\n            },\n            drag: e => {\n                const nextValue = dragTargetValue.replace(/-?\\d+/g, (num: string) => {\n                    return `${parseFloat(num) + Math.round(e.distX / 2)}`;\n                });\n\n                dragTarget.value = nextValue;\n            },\n            dragend: e => {\n                this.edit(dragTarget, dragTarget.value);\n            },\n        });\n        new KeyController(element)\n            .keydown(e => {\n                !e.isToggle && e.inputEvent.stopPropagation();\n            })\n            .keyup(e => {\n                !e.isToggle && e.inputEvent.stopPropagation();\n            })\n            .keyup(\"enter\", e => {\n                const target = e.inputEvent.target as HTMLInputElement;\n\n                this.edit(target, target.value);\n            })\n            .keyup(\"esc\", e => {\n                const target = e.inputEvent.target as HTMLInputElement;\n\n                target.blur();\n            });\n    }\n    private edit(target: HTMLInputElement, value: any) {\n        const parentEl = getTarget(target, el => hasClass(el, \"value\"));\n\n        if (!parentEl) {\n            return;\n        }\n        console.log(target, value);\n        const index = findIndex(this.values, v => v.getElement() === parentEl);\n\n        if (index === -1) {\n            return;\n        }\n        this.props.editKeyframe(index, value);\n    }\n}\n","import { TimelineInfo, PropertiesInfo } from \"../types\";\nimport ElementComponent from \"../utils/ElementComponent\";\nimport KeyframesArea from \"./KeyframesArea/KeyframesArea\";\nimport PropertiesArea from \"./PropertiesArea/PropertiesArea\";\nimport ValuesArea from \"./ValuesArea/ValuesArea\";\nimport * as React from \"react\";\nimport { prefix, ref, fold, getTarget, hasClass } from \"../utils\";\nimport Axes from \"@egjs/axes\";\nimport KeyController from \"keycon\";\nimport Scene, { SceneItem } from \"scenejs\";\n\nexport default class ScrollArea extends ElementComponent<{\n    timelineInfo: TimelineInfo,\n    maxTime: number,\n    maxDuration: number,\n    zoom: number,\n    axes: Axes,\n    keycon: KeyController,\n    selectedProperty: string,\n    selectedTime: number,\n    add: (item: Scene | SceneItem, properties: string[]) => any,\n    setTime: (time?: number) => any,\n    select: (property: string, time?: number, isNotUpdate?: boolean) => any,\n    editKeyframe: (index: number, value: any) => any,\n    update: () => any,\n}> {\n    public propertiesArea!: PropertiesArea;\n    public valuesArea!: ValuesArea;\n    public keyframesArea!: KeyframesArea;\n    public render() {\n        const {\n            axes, keycon, zoom, maxDuration, maxTime, timelineInfo,\n            selectedProperty, selectedTime, add, setTime, editKeyframe,\n        } = this.props;\n\n        return (\n            <div className={prefix(\"scroll-area\")}>\n                <PropertiesArea\n                    ref={ref(this, \"propertiesArea\")}\n                    timelineInfo={timelineInfo}\n                    selectedProperty={selectedProperty}\n                />\n                <ValuesArea\n                    ref={ref(this, \"valuesArea\")}\n                    add={add}\n                    keycon={keycon}\n                    setTime={setTime}\n                    editKeyframe={editKeyframe}\n                    timelineInfo={timelineInfo}\n                    selectedProperty={selectedProperty}\n                />\n                <KeyframesArea\n                    ref={ref(this, \"keyframesArea\")}\n                    axes={axes}\n                    keycon={keycon}\n                    zoom={zoom}\n                    maxDuration={maxDuration}\n                    timelineInfo={timelineInfo}\n                    maxTime={maxTime}\n                    selectedProperty={selectedProperty}\n                    selectedTime={selectedTime}\n                />\n            </div>\n        );\n    }\n    public componentDidMount() {\n        this.initClickProperty();\n        this.foldAll();\n    }\n    public foldAll() {\n        // fold all\n        this.propertiesArea.properties.forEach((property, i) => {\n            const { keys, isParent } = property.props.propertiesInfo;\n\n            if (keys.length === 1 && isParent) {\n                this.fold(i);\n            }\n        });\n    }\n    private fold(index: number, isNotUpdate?: boolean) {\n        const selectedProperty = this.propertiesArea.properties[index];\n        const foldedId = selectedProperty.props.id;\n\n        fold(this.propertiesArea, foldedId, isNotUpdate);\n        fold(this.valuesArea, foldedId, isNotUpdate);\n        fold(this.keyframesArea, foldedId, isNotUpdate);\n    }\n    private removeProperty(propertiesInfo: PropertiesInfo) {\n        const { key, isItem, parentItem, item: targetItem, properties } = propertiesInfo;\n        if (isItem) {\n            let targetName: string | number | null = null;\n            parentItem.forEach((item, name) => {\n                if (item === targetItem) {\n                    targetName = name;\n                    return;\n                }\n            });\n            if (targetName != null) {\n                parentItem.removeItem(targetName);\n            }\n        } else {\n            const times = (targetItem as SceneItem).times;\n\n            times.forEach(time => {\n                (targetItem as SceneItem).remove(time, ...properties);\n            });\n        }\n        if (this.props.selectedProperty === key) {\n            this.props.select(\"\", -1, true);\n        }\n        this.props.update();\n    }\n    private initClickProperty() {\n        this.propertiesArea.getElement().addEventListener(\"click\", e => {\n            const isClickArrow = getTarget(e.target as HTMLElement, el => hasClass(el, \"arrow\"));\n            const isClickRemove = getTarget(e.target as HTMLElement, el => hasClass(el, \"remove\"));\n            const target = getTarget(e.target as HTMLElement, el => hasClass(el, \"property\"));\n\n            if (!target) {\n                return;\n            }\n            const properties = this.propertiesArea.properties;\n            const index = this.propertiesArea.properties\n                .map(property => property.getElement())\n                .indexOf(target);\n\n            if (index === -1) {\n                return;\n            }\n            const selectedProperty = properties[index];\n\n            if (isClickRemove) {\n                this.removeProperty(selectedProperty.props.propertiesInfo);\n            } else {\n                this.props.select(selectedProperty.props.id);\n\n                if (isClickArrow) {\n                    this.fold(index);\n                }\n            }\n        });\n    }\n}\n","import { now } from \"@daybrush/utils\";\n\nlet prevTime = 0;\nlet prevX = -1;\nlet prevY = -1;\n\nexport function dblCheck(\n    isDrag: boolean,\n    e: any,\n    clientX: number,\n    clientY: number,\n    callback: (e: any, clientX: number, clientY: number) => void,\n) {\n    const currentTime = now();\n\n    if (!isDrag) {\n        if (\n            prevX === clientX\n            && prevY === clientY\n            && currentTime - prevTime <= 500\n        ) {\n            callback(e, clientX, clientY);\n        }\n        prevX = clientX;\n        prevY = clientY;\n        prevTime = currentTime;\n    }\n}\n","import Scene, { AnimatorState, SceneItem } from \"scenejs\";\nimport { ITERATION_COUNT, DELAY, PLAY_SPEED, DIRECTION, REVERSE, ALTERNATE, ALTERNATE_REVERSE } from \"./consts\";\nimport { TimelineInfo } from \"./types\";\nimport { isScene } from \"./utils\";\nimport { isUndefined, isObject } from \"@daybrush/utils\";\n\nexport const MAXIMUM = 1000000;\nexport function toFixed(num: number) {\n    return Math.round(num * MAXIMUM) / MAXIMUM;\n}\nexport function addEntry(entries: number[][], time: number, keytime: number) {\n    const prevEntry = entries[entries.length - 1];\n\n    (!prevEntry || prevEntry[0] !== time || prevEntry[1] !== keytime) &&\n        entries.push([toFixed(time), toFixed(keytime)]);\n}\nexport function dotNumber(a1: number, a2: number, b1: number, b2: number) {\n    return (a1 * b2 + a2 * b1) / (b1 + b2);\n  }\nexport function getEntries(times: number[], states: AnimatorState[]) {\n    if (!times.length) {\n        return [];\n    }\n    let entries = times.map(time => ([time, time]));\n    let nextEntries: number[][] = [];\n    const firstEntry = entries[0];\n    if (firstEntry[0] !== 0 && states[states.length - 1][DELAY]) {\n        entries.unshift([0, 0]);\n    }\n\n    states.forEach(state => {\n        const iterationCount = state[ITERATION_COUNT] as number;\n        const delay = state[DELAY];\n        const playSpeed = state[PLAY_SPEED];\n        const direction = state[DIRECTION];\n        const intCount = Math.ceil(iterationCount);\n        const currentDuration = entries[entries.length - 1][0];\n        const length = entries.length;\n        const lastTime = currentDuration * iterationCount;\n\n        for (let i = 0; i < intCount; ++i) {\n            const isReverse =\n                direction === REVERSE\n                || (direction === ALTERNATE && (i % 2))\n                || (direction === ALTERNATE_REVERSE && !(i % 2));\n\n            for (let j = 0; j < length; ++j) {\n                const entry = entries[isReverse ? length - j - 1 : j];\n                const time = entry[1];\n                const currentTime = currentDuration * i + (isReverse ? currentDuration - entry[0] : entry[0]);\n                const prevEntry = entries[isReverse ? length - j : j - 1];\n\n                if (currentTime > lastTime) {\n                    if (j !== 0) {\n                        const prevTime = currentDuration * i +\n                            (isReverse ? currentDuration - prevEntry[0] : prevEntry[0]);\n                        const divideTime = dotNumber(prevEntry[1], time, lastTime - prevTime, currentTime - lastTime);\n\n                        addEntry(nextEntries, (delay + currentDuration * iterationCount) / playSpeed, divideTime);\n                    }\n                    break;\n                } else if (\n                    currentTime === lastTime\n                    && nextEntries.length\n                    && nextEntries[nextEntries.length - 1][0] === lastTime + delay\n                ) {\n                    break;\n                }\n                addEntry(nextEntries, (delay + currentTime) / playSpeed, time);\n            }\n        }\n        // delay time\n        delay && nextEntries.unshift([0, nextEntries[0][1]]);\n\n        entries = nextEntries;\n        nextEntries = [];\n    });\n\n    return entries;\n}\nexport function getItemInfo(\n    timelineInfo: TimelineInfo,\n    items: Array<Scene | SceneItem>,\n    names: Array<string | number>,\n    item: SceneItem) {\n    item.update();\n    const times = item.times.slice();\n\n    const originalDuration = item.getDuration();\n    (!item.getFrame(0)) && times.unshift(0);\n    (!item.getFrame(originalDuration)) && times.push(originalDuration);\n    const states = items.slice(1).map(animator => animator.state).reverse();\n    const entries = getEntries(times, states);\n    const parentItem = items[items.length - 2] as Scene;\n\n    (function getPropertyInfo(itemNames: any, ...properties: any[]) {\n        const frames: any[] = [];\n        const isParent = isObject(itemNames);\n        const isItem = properties.length === 0;\n        entries.forEach(([time, iterationTime]) => {\n            const value = item.get(iterationTime, ...properties);\n            if (isUndefined(value) && properties.length) {\n                return;\n            }\n            frames.push([time, iterationTime, value]);\n        });\n        const keys = [...names, ...properties];\n        const key = keys.join(\"///\");\n\n        if (key) {\n            timelineInfo[key] = {\n                key,\n                keys,\n                parentItem,\n                isParent,\n                isItem,\n                item,\n                names,\n                properties,\n                frames,\n            };\n        }\n        if (isParent) {\n            for (const property in itemNames) {\n                getPropertyInfo(itemNames[property], ...properties, property);\n            }\n        }\n    })(item.names);\n}\nexport function getTimelineInfo(scene: Scene | SceneItem): TimelineInfo {\n    const timelineInfo: TimelineInfo = {};\n    (function sceneForEach(...items: Array<Scene | SceneItem>) {\n        const length = items.length;\n        const lastItem = items[length - 1];\n        const names = items.slice(1).map(item => item.getId());\n        if (isScene(lastItem)) {\n            if (names.length) {\n                const key = names.join(\"///\");\n\n                const times = [0, lastItem.getDuration()];\n                const entries = getEntries(times, items.slice(1).map(animator => animator.state).reverse());\n                const frames: any[] = [];\n                entries.forEach(([time, iterationTime]) => {\n                    frames.push([time, iterationTime, iterationTime]);\n                });\n                timelineInfo[key] = {\n                    key,\n                    keys: names,\n                    isItem: true,\n                    isParent: true,\n                    parentItem: items[length - 2] as Scene,\n                    item: lastItem,\n                    names: [],\n                    properties: [],\n                    frames,\n                };\n            }\n            lastItem.forEach((item: Scene | SceneItem) => {\n                sceneForEach(...items, item);\n            });\n        } else {\n            getItemInfo(timelineInfo, items, names, lastItem);\n        }\n    })(scene);\n    return timelineInfo;\n}\n","import { TimelineProps, TimelineState } from \"./types\";\nimport ControlArea from \"./HeaderArea/ControlArea\";\nimport HeaderArea from \"./HeaderArea/HeaderArea\";\nimport ScrollArea from \"./ScrollArea/ScrollArea\";\nimport * as React from \"react\";\nimport { CSS, SUPPORT_TOUCH, SUPPORT_POINTER_EVENTS } from \"./consts\";\nimport {\n    prefix,\n    numberFormat,\n    ref,\n    getTarget, findElementIndexByPosition,\n    hasClass, flatObject, isScene\n} from \"./utils\";\nimport Axes, { PinchInput } from \"@egjs/axes\";\nimport KeyController from \"keycon\";\nimport Scene, { SceneItem } from \"scenejs\";\nimport { drag } from \"@daybrush/drag\";\nimport { dblCheck } from \"./dblcheck\";\nimport { getTimelineInfo } from \"./TimelineInfo\";\nimport { IObject, find, isUndefined } from \"@daybrush/utils\";\n\nlet isExportCSS = false;\n\nexport default class Timeline extends React.Component<TimelineProps, TimelineState> {\n    public static defaultProps = {\n        keyboard: true,\n    };\n    public headerArea!: HeaderArea;\n    public controlArea!: ControlArea;\n    public scrollArea!: ScrollArea;\n    public state: TimelineState = {\n        alt: false,\n        zoom: 1,\n        maxDuration: 0,\n        maxTime: 0,\n        timelineInfo: {},\n        selectedProperty: \"\",\n        selectedTime: -1,\n        init: false,\n    };\n    private isExportCSS = false;\n    private axes!: Axes;\n    private keycon!: KeyController;\n    constructor(props: any) {\n        super(props);\n        if (isExportCSS) {\n            isExportCSS = true;\n            this.isExportCSS = true;\n        }\n\n        this.state = { ...this.state, ...this.initScene(this.props.scene) };\n\n        this.keycon = new KeyController()\n            .keydown(\"alt\", () => {\n                this.setState({ alt: true });\n            })\n            .keyup(\"alt\", () => {\n                this.setState({ alt: false });\n            });\n        this.axes = new Axes(\n            {\n                zoom: {\n                    range: [1, Infinity],\n                },\n            },\n            {},\n            { zoom: 1 },\n        );\n    }\n    public render() {\n        const {\n            scene,\n            className,\n            keyboard,\n            onSelect,\n            ...attributes\n        } = this.props;\n        const {\n            zoom,\n            alt,\n            maxDuration,\n            maxTime,\n            timelineInfo,\n            selectedProperty,\n            selectedTime,\n        } = this.state;\n\n        return (\n            <div\n                className={prefix(\"timeline\" + (alt ? \" alt\" : \"\")) + (className ? ` ${className}` : \"\")}\n                {...attributes}>\n                {this.renderStyle()}\n                <ControlArea\n                    ref={ref(this, \"controlArea\")}\n                    scene={scene}\n                    select={this.select}\n                    prev={this.prev}\n                    next={this.next}\n                    setTime={this.setTime}\n                    togglePlay={this.togglePlay}\n                />\n                <HeaderArea\n                    ref={ref(this, \"headerArea\")}\n                    scene={scene}\n                    add={this.add}\n                    axes={this.axes!}\n                    move={this.move}\n                    maxDuration={maxDuration}\n                    zoom={zoom}\n                    maxTime={maxTime}\n                    timelineInfo={timelineInfo} />\n                <ScrollArea\n                    ref={ref(this, \"scrollArea\")}\n                    add={this.add}\n                    setTime={this.setTime}\n                    editKeyframe={this.editKeyframe}\n                    keycon={this.keycon!}\n                    axes={this.axes!}\n                    maxDuration={maxDuration}\n                    zoom={zoom}\n                    maxTime={maxTime}\n                    update={this.update}\n                    select={this.select}\n                    selectedProperty={selectedProperty}\n                    selectedTime={selectedTime}\n                    timelineInfo={timelineInfo}\n                />\n            </div>\n        );\n    }\n    public componentDidMount() {\n        this.initWheelZoom();\n        this.initScroll();\n        this.initDragKeyframes();\n        this.initKeyController();\n    }\n    public componentDidUpdate(prevProps: TimelineProps, prevState: TimelineState) {\n        if (this.props.onSelect && prevState.selectedProperty !== this.state.selectedProperty) {\n            const {\n                selectedProperty: prevSelectedProperty,\n                selectedTime: prevSelectedTime,\n            } = prevState;\n            const {\n                selectedProperty,\n                selectedTime,\n            } = this.state;\n            const selectedItem = this.state.timelineInfo[selectedProperty]!;\n\n            this.props.onSelect({\n                selectedItem: !selectedProperty ? this.props.scene! : selectedItem.item,\n                selectedProperty,\n                selectedTime,\n                prevSelectedProperty,\n                prevSelectedTime,\n            });\n        }\n\n        if (this.state.init) {\n            this.state.init = false;\n            this.scrollArea.foldAll();\n        }\n        if (prevProps.scene !== this.props.scene) {\n            this.releaseScene(prevProps.scene);\n\n            this.setState(this.initScene(this.props.scene));\n        } else {\n            this.setTime();\n        }\n\n    }\n    public update = (isInit: boolean = false) => {\n        const scene = this.props.scene;\n\n        if (!scene) {\n            return;\n        }\n        const maxDuration = Math.ceil(scene.getDuration());\n        const maxTime = Math.max(this.state.maxTime, maxDuration);\n        const currentMaxTime = this.state.maxTime;\n        const zoom = this.axes.get([\"zoom\"]).zoom;\n        const nextZoomScale = currentMaxTime > 1 ? maxTime / currentMaxTime : 1;\n        const nextZoom = Math.max(1, zoom * nextZoomScale);\n\n        this.setState({\n            timelineInfo: getTimelineInfo(scene),\n            maxTime,\n            maxDuration,\n            init: isInit,\n        });\n\n        this.axes.axm.set({ zoom: nextZoom });\n    }\n    public prev = () => {\n        const scene = this.props.scene;\n\n        scene && this.setTime(scene.getTime() - 0.05);\n    }\n    public next = () => {\n        const scene = this.props.scene;\n\n        scene && this.setTime(scene.getTime() + 0.05);\n    }\n    public finish = () => {\n        const scene = this.props.scene;\n\n        scene && scene.finish();\n    }\n    public togglePlay = () => {\n        const scene = this.props.scene;\n        if (!scene) {\n            return;\n        }\n        if (scene.getPlayState() === \"running\") {\n            scene.pause();\n        } else {\n            scene.play();\n        }\n    }\n    private renderStyle() {\n        if (!this.isExportCSS) {\n            return <style>{CSS}</style>;\n        }\n    }\n    private add = (item: Scene | SceneItem = this.props.scene!, properties: string[] = []) => {\n        if (isScene(item)) {\n            this.newItem(item);\n        } else {\n            this.newProperty(item, properties);\n        }\n    }\n    private newItem(scene: Scene) {\n        const name = prompt(\"Add Item\");\n\n        if (!name) {\n            return;\n        }\n        scene.newItem(name);\n        this.update();\n    }\n    private newProperty(item: SceneItem, properties: string[]) {\n        const property = prompt(\"Add Property\");\n\n        if (!property) {\n            return;\n        }\n        item.set(item.getIterationTime(), ...properties, property, \"\");\n        this.update();\n    }\n    private getDistTime = (\n        distX: number,\n        rect: ClientRect\n            = this.scrollArea.keyframesArea.scrollAreaElement.getBoundingClientRect(),\n    ) => {\n        const scrollAreaWidth = rect.width - 30;\n        const percentage = Math.min(scrollAreaWidth, distX) / scrollAreaWidth;\n        const time = this.state.maxTime * percentage;\n\n        return Math.round(time * 20) / 20;\n    }\n    private setTime = (time?: number) => {\n        const scene = this.props.scene;\n\n        if (!scene) {\n            return;\n        }\n        const direction = scene.getDirection();\n\n        scene.pause();\n\n        if (isUndefined(time)) {\n            time = scene.getTime();\n        }\n        if (direction === \"normal\" || direction === \"alternate\") {\n            scene.setTime(time);\n        } else {\n            scene.setTime(scene.getDuration() - time!);\n        }\n    }\n    private getTime = (clientX: number) => {\n        const rect = this.scrollArea.keyframesArea.scrollAreaElement.getBoundingClientRect();\n        const scrollAreaX = rect.left + 15;\n        const x = Math.max(clientX - scrollAreaX, 0);\n\n        return this.getDistTime(x, rect);\n    }\n    private move = (clientX: number) => {\n        this.setTime(this.getTime(clientX));\n    }\n    private moveCursor(time: number) {\n        const maxTime = this.state.maxTime;\n        const px = 15 - 30 * time / maxTime;\n        const percent = 100 * time / maxTime;\n        const left = `calc(${percent}% + ${px}px)`;\n\n        this.scrollArea.keyframesArea.cursor.getElement().style.left = left;\n        this.headerArea.keytimesArea.cursor.getElement().style.left = left;\n    }\n    private setInputs(obj: IObject<any>) {\n        const valuesArea = this.scrollArea.valuesArea.getElement();\n        for (const name in obj) {\n            valuesArea.querySelector<HTMLInputElement>(`[data-id=\"${name}\"] input`)!.value = obj[name];\n        }\n    }\n    private select = (property: string, time: number = -1, isNotUpdate?: boolean) => {\n        const scene = this.props.scene;\n        if (!scene) {\n            return;\n        }\n        scene.pause();\n\n        if (isNotUpdate) {\n            this.state.selectedProperty = property;\n            this.state.selectedTime = -1;\n        } else {\n            this.setState({\n                selectedProperty: property,\n                selectedTime: time,\n            });\n        }\n    }\n    private editKeyframe = (index: number, value: any) => {\n        const propertiesInfo = this.scrollArea.propertiesArea.properties[index].props.propertiesInfo;\n        const isObjectData = propertiesInfo.isParent;\n\n        if (isObjectData) {\n            return;\n        }\n        const item = propertiesInfo.item;\n        const properties = propertiesInfo.properties;\n\n        item.set(item.getIterationTime(), ...properties, value);\n        this.update();\n    }\n    private removeKeyframe(property: string) {\n        const propertiesInfo = this.state.timelineInfo[property];\n        if (!property || !propertiesInfo || isScene(propertiesInfo.item)) {\n            return;\n        }\n\n        const properties = propertiesInfo.properties;\n        const item = propertiesInfo.item!;\n\n        item.remove(item.getIterationTime(), ...properties);\n        this.update();\n    }\n    private addKeyframe(index: number, time: number) {\n        const keyframesList = this.scrollArea.keyframesArea.keyframesList!;\n        const {\n            id,\n        } = keyframesList[index].props;\n\n        this.select(id, time);\n\n        const inputElement = this.scrollArea.valuesArea.values[index].inputElement!;\n\n        if (inputElement) {\n            this.editKeyframe(index, inputElement.value);\n        }\n    }\n    private animate = (e: any) => {\n        const time = e.time;\n        const minute = numberFormat(Math.floor(time / 60), 2);\n        const second = numberFormat(Math.floor(time % 60), 2);\n        const milisecond = numberFormat(Math.floor((time % 1) * 100), 3, true);\n\n        this.moveCursor(time);\n        this.setInputs(flatObject(e.frames || e.frame.get()));\n        this.controlArea.timeArea.getElement().value = `${minute}:${second}:${milisecond}`;\n    }\n    private initScene(scene?: Scene | SceneItem) {\n        if (!scene) {\n            return {\n                timelineInfo: {},\n                maxTime: 0,\n                maxDuration: 0,\n                zoom: 1,\n                init: false,\n            };\n        }\n        scene.finish();\n        scene.on(\"animate\", this.animate);\n        const duration = Math.ceil(scene.getDuration());\n\n        return {\n            timelineInfo: getTimelineInfo(scene),\n            maxTime: duration,\n            maxDuration: duration,\n            zoom: 1,\n            init: true,\n        };\n    }\n    private releaseScene(scene?: Scene | SceneItem) {\n        if (!scene) {\n            return;\n        }\n        scene.off(\"animate\", this.animate);\n    }\n    private initWheelZoom() {\n        const scrollArea = this.scrollArea.getElement();\n        const axes = this.axes!;\n\n        if (SUPPORT_TOUCH || SUPPORT_POINTER_EVENTS) {\n            axes.connect(\"zoom\", new PinchInput(scrollArea, {\n                scale: 0.1,\n                hammerManagerOptions: {\n                    touchAction: \"auto\",\n                },\n            }));\n        }\n        axes.on(\"hold\", e => {\n            if (e.inputEvent) {\n                e.inputEvent.preventDefault();\n            }\n        });\n        axes.on(\"change\", e => {\n            if (e.pos.zoom === this.state.zoom) {\n                return;\n            }\n            this.setState({\n                zoom: e.pos.zoom,\n            });\n\n            if (e.inputEvent) {\n                e.inputEvent.preventDefault();\n            }\n        });\n\n        this.axes = axes;\n    }\n\n    private initScroll() {\n        let isScrollKeyframe = false;\n\n        const headerKeyframesArea = this.headerArea.keytimesArea.getElement();\n        const scrollKeyframesArea = this.scrollArea.keyframesArea.getElement();\n\n        headerKeyframesArea.addEventListener(\"scroll\", () => {\n            if (isScrollKeyframe) {\n                isScrollKeyframe = false;\n            } else {\n                isScrollKeyframe = true;\n                scrollKeyframesArea.scrollLeft = headerKeyframesArea.scrollLeft;\n            }\n        });\n        scrollKeyframesArea.addEventListener(\"scroll\", () => {\n            if (isScrollKeyframe) {\n                isScrollKeyframe = false;\n            } else {\n                isScrollKeyframe = true;\n                headerKeyframesArea.scrollLeft = scrollKeyframesArea.scrollLeft;\n            }\n        });\n    }\n    private initDragKeyframes() {\n        const click = (e: MouseEvent, clientX: number, clientY: number) => {\n            const target = getTarget(e.target as HTMLElement, el => hasClass(el, \"keyframe\"));\n            const time = target ? parseFloat(target.getAttribute(\"data-time\") || \"\") : this.getTime(clientX);\n\n            this.setTime(time);\n            const list = this.scrollArea.keyframesArea.keyframesList;\n            const index = findElementIndexByPosition(\n                list.map(keyframes => keyframes.getElement()),\n                clientY,\n            );\n\n            if (index > -1) {\n                this.select(list[index].props.id, time);\n            }\n            e.preventDefault();\n        };\n        const dblclick = (e: MouseEvent, clientX: number, clientY: number) => {\n            const list = this.scrollArea.keyframesArea.keyframesList;\n            const index = findElementIndexByPosition(\n                list.map(keyframes => keyframes.getElement()),\n                clientY,\n            );\n\n            if (index === -1) {\n                return;\n            }\n            this.addKeyframe(index, this.getTime(clientX));\n        };\n        const keytimesScrollArea = this.headerArea.keytimesArea.scrollAreaElement;\n        const keyframesScrollArea = this.scrollArea.keyframesArea.scrollAreaElement;\n        let dragItem: Scene | SceneItem | null;\n        let dragDelay: number = 0;\n        let dragTarget: HTMLElement | null;\n        [\n            keytimesScrollArea,\n            keyframesScrollArea,\n        ].forEach(element => {\n            drag(element, {\n                container: window,\n                dragstart: ({ inputEvent }) => {\n                    dragTarget = getTarget(inputEvent.target, el => hasClass(el, \"keyframe-group\"));\n                    if (dragTarget) {\n                        const properties = this.scrollArea.propertiesArea.properties;\n                        const keyframesElement = getTarget(dragTarget, el => hasClass(el, \"keyframes\"))!;\n                        const id = keyframesElement.getAttribute(\"data-id\")!;\n                        const property = find(properties, p => p.props.id === id)!;\n                        const propertiesInfo = property.props.propertiesInfo;\n\n                        dragItem = propertiesInfo.item;\n                        dragDelay = dragItem.getDelay();\n                    }\n                },\n                drag: ({ distX, deltaX, deltaY, inputEvent }) => {\n                    if (dragTarget) {\n                        dragItem!.setDelay(Math.max(dragDelay + this.getDistTime(distX), 0));\n                        this.update();\n                    } else {\n                        this.scrollArea.keyframesArea.getElement().scrollLeft -= deltaX;\n                        this.scrollArea.getElement().scrollTop -= deltaY;\n                        inputEvent.preventDefault();\n                    }\n                },\n                dragend: ({ isDrag, clientX, clientY, inputEvent }) => {\n                    dragTarget = null;\n                    dragItem = null;\n                    dragDelay = 0;\n                    !isDrag && click(inputEvent, clientX, clientY);\n                    dblCheck(isDrag, inputEvent, clientX, clientY, dblclick);\n                },\n            });\n        });\n    }\n    private initKeyController() {\n        window.addEventListener(\"blur\", () => {\n            this.setState({ alt: false });\n        });\n\n        // if (props.keyboard) {\n        if (this.props.keyboard) {\n            this.keycon!.keydown(\"space\", ({ inputEvent }) => {\n                inputEvent.preventDefault();\n            })\n                .keydown(\"left\", e => {\n                    this.prev();\n                })\n                .keydown(\"right\", e => {\n                    this.next();\n                })\n                .keyup(\"backspace\", () => {\n                    this.removeKeyframe(this.state.selectedProperty);\n                })\n                .keyup(\"esc\", () => {\n                    this.finish();\n                })\n                .keyup(\"space\", () => {\n                    this.togglePlay();\n                });\n        }\n    }\n}\n"],"names":["PREFIX","SUPPORT_POINTER_EVENTS","window","SUPPORT_TOUCH","CSS2","replace","CSS","DIRECTION","ITERATION_COUNT","DELAY","PLAY_SPEED","ALTERNATE","REVERSE","ALTERNATE_REVERSE","numberFormat","num","count","isRight","length","arr","push","i","join","keys","value","name","toValue","isObject","Array","isArray","map","k","flatObject","obj","newObj","nextObj","isFrame","get","nextName","getTarget","target","conditionCallback","parentTarget","document","body","parentNode","hasClass","className","hasClass2","isScene","constructor","prototype","getItem","toCSS","findElementIndexByPosition","elements","pos","findIndex","el","box","getBoundingClientRect","top","bottom","height","prefix","split","ref","e","refs","checkFolded","foldedInfo","names","index","slice","fold","foldedProperty","isNotUpdate","id","state","setState","tslib_1","element","ReactDOM","React","KeyController","getElement","keydown","isToggle","inputEvent","stopPropagation","keyup","_this","result","exec","minute","parseFloat","second","milisecond","time","props","setTime","ElementComponent","isPlay","select","onClick","unselect","TimeArea","prev","togglePlay","next","initScene","scene","prevProps","releaseScene","on","play","paused","pause","off","maxTime","keytimes","key","style","width","_a","maxDuration","zoom","minWidth","Math","min","renderKeytimes","KeyframeCursor","addEvent","delta","deltaY","axes","setBy","deltaX","preventDefault","drag","cursor","dragstart","clientX","move","container","add","timelineInfo","KeytimesArea","selected","left","nextTime","propertiesInfo","folded","isItem","renderList","selectedTime","item","frames","properties","isItScene","duration","getDuration","keyframes","keyframeGroups","keyframeDelays","keyframeLines","hasProperties","startIndex","isUndefined","max","startFrame","endFrame","KeyframeGroup","forEach","iterationTime","valueText","_b","nextIterationTime","KeyframeDelay","_c","nextValue","nextValueText","KeyframeLine","Keyframe","lines","selectedProperty","keyframesList","Keyframes","LineArea","keycon","altKey","propertyNames","isParent","paddingLeft","Property","renderValue","values","Value","dragTarget","dragTargetValue","addEventListener","nodeName","round","distX","dragend","edit","blur","parentEl","console","log","v","editKeyframe","PropertiesArea","ValuesArea","KeyframesArea","initClickProperty","foldAll","propertiesArea","property","foldedId","valuesArea","keyframesArea","parentItem","targetItem","targetName_1","removeItem","times","remove","update","isClickArrow","isClickRemove","indexOf","removeProperty","prevTime","prevX","prevY","dblCheck","isDrag","clientY","callback","currentTime","now","MAXIMUM","toFixed","addEntry","entries","keytime","prevEntry","dotNumber","a1","a2","b1","b2","getEntries","states","nextEntries","firstEntry","unshift","iterationCount","delay","playSpeed","direction","intCount","ceil","currentDuration","lastTime","isReverse","j","entry","divideTime","getItemInfo","items","originalDuration","getFrame","animator","reverse","getPropertyInfo","itemNames","_i","getTimelineInfo","sceneForEach","lastItem","getId","frames_1","isExportCSS","_super","alt","init","isInit","currentMaxTime","nextZoomScale","nextZoom","axm","set","getTime","finish","getPlayState","newItem","newProperty","rect","scrollArea","scrollAreaElement","scrollAreaWidth","percentage","getDirection","scrollAreaX","x","getDistTime","isObjectData","getIterationTime","floor","moveCursor","setInputs","frame","controlArea","timeArea","Axes","range","Infinity","keyboard","onSelect","attributes","renderStyle","ControlArea","HeaderArea","ScrollArea","initWheelZoom","initScroll","initDragKeyframes","initKeyController","prevState","prevSelectedProperty","prevSelectedTime","selectedItem","prompt","px","percent","headerArea","keytimesArea","querySelector","inputElement","animate","connect","PinchInput","scale","hammerManagerOptions","touchAction","isScrollKeyframe","headerKeyframesArea","scrollKeyframesArea","scrollLeft","click","getAttribute","list","dblclick","addKeyframe","keytimesScrollArea","keyframesScrollArea","dragItem","dragDelay","keyframesElement","id_1","find","p","getDelay","setDelay","scrollTop","removeKeyframe","Timeline"],"mappings":"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"}